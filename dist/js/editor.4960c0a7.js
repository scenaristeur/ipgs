(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{"0cb2":function(e,t,n){var o=n("7b0b"),r=Math.floor,a="".replace,i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,c,d){var u=n+e.length,p=l.length,f=s;return void 0!==c&&(c=o(c),f=i),a.call(d,f,(function(o,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":i=c[a.slice(1,-1)];break;default:var s=+a;if(0===s)return o;if(s>p){var d=r(s/10);return 0===d?o:d<=p?void 0===l[d-1]?a.charAt(1):l[d-1]+a.charAt(1):o}i=l[s-1]}return void 0===i?"":i}))}},"0d88":function(e,t,n){"use strict";const{isArray:o,isObject:r,isString:a}=n("68fa"),{asArray:i}=n("89ae"),{prependBase:s}=n("ddd7"),l=n("5950"),c=n("9093"),d=10;function u(e){throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function p({context:e,base:t}){if(!e)return;const n=e["@context"];if(a(n))e["@context"]=s(t,n);else if(o(n))for(let o=0;o<n.length;++o){const e=n[o];a(e)?n[o]=s(t,e):r(e)&&p({context:{"@context":e},base:t})}else if(r(n))for(const o in n)p({context:n[o],base:t})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:s,cycles:l=new Set}){t&&r(t)&&t["@context"]&&(t=t["@context"]),t=i(t);const d=[];for(const i of t){if(a(i)){let t=this._get(i);t||(t=await this._resolveRemoteContext({activeCtx:e,url:i,documentLoader:n,base:s,cycles:l})),o(t)?d.push(...t):d.push(t);continue}if(null===i){d.push(new c({document:null}));continue}r(i)||u(t);const p=JSON.stringify(i);let f=this._get(p);f||(f=new c({document:i}),this._cacheResolvedContext({key:p,resolved:f,tag:"static"})),d.push(f)}return d}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let o=this.sharedCache.get(e);o||(o=new Map,this.sharedCache.set(e,o)),o.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:o,cycles:r}){t=s(o,t);const{context:a,remoteDoc:i}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:r});o=i.documentUrl||t,p({context:a,base:o});const l=await this.resolve({activeCtx:e,context:a,documentLoader:n,base:o,cycles:r});return this._cacheResolvedContext({key:t,resolved:l,tag:i.tag}),l}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:i}){if(i.size>d)throw new l("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:d});if(i.has(t))throw new l("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let s,c;i.add(t);try{c=await n(t),s=c.document||null,a(s)&&(s=JSON.parse(s))}catch(u){throw new l("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:u})}if(!r(s))throw new l("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return s="@context"in s?{"@context":s["@context"]}:{"@context":{}},c.contextUrl&&(o(s["@context"])||(s["@context"]=[s["@context"]]),s["@context"].push(c.contextUrl)),{context:s,remoteDoc:c}}}},1:function(e,t){},"178c":function(e,t,n){"use strict";var o=n("1da1"),r=(n("a15b"),n("1276"),n("ac1f"),n("498a"),n("159b"),n("5319"),n("7db0"),n("2b3d"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("46bd")),a=n("5406"),i=n("89a1"),s=n("00e8"),l=n.n(s),c=n("7fed"),d=n.n(c),u=new d.a(l.a);t["a"]={methods:{loadFRAMED:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u.readFile(e,{headers:{Accept:"application/ld+json","Content-Type":"application/ld+json"}});case 2:o=n.sent,r=JSON.parse(o),console.log("jsonFile",r),Array.isArray(r)&&1==r.length&&void 0!=r[0]["@id"]?t.parsePossibleJsonld(e,r[0]):Array.isArray(r)&&r.length>1?t.parseFolder(e):t.parsePossibleJsonld(e,r);case 6:case"end":return n.stop()}}),n)})))()},parseFolder:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.readFolder(e);case 2:n=t.sent,console.log("FOLDER",n);case 4:case"end":return t.stop()}}),t)})))()},parsePossibleJsonld:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var o,i,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("possible jsonld",e,t),o={"@context":{"@vocab":"http://example.org/"},"@type":"Library",contains:{"@type":"Book",contains:{"@type":"Chapter"}},"ldp:contains":{"@type":"Book","ldp:contains":{"@type":"Chapter"}},nodes:[],edges:[]},n.next=4,r["frame"](t,o);case 4:if(i=n.sent,console.log("FRAMED",i),s={},void 0==t["@context"]){n.next=16;break}return n.next=10,t["@context"];case 10:return l=n.sent,n.next=13,r["compact"](e,l);case 13:s=n.sent,n.next=19;break;case 16:return n.next=18,r["compact"](e,a["@context"]);case 18:s=n.sent;case 19:console.log("compacted loaded",s);case 20:case"end":return n.stop()}}),n)})))()},load:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var o,a,s,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("LOAD",e),o="xhr",n.next=4,r["useDocumentLoader"](o);case 4:return a={},n.prev=5,n.next=8,r["documentLoader"](e,(function(e){e&&console.log(e)}));case 8:a=n.sent,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](5),alert(n.t0);case 14:if(s=JSON.parse(a.document),console.log("JSON",s),void 0==s.nodes||!Array.isArray(s.nodes)||void 0==s.edges||!Array.isArray(s.edges)){n.next=22;break}return t.network.nodes=s.nodes,t.network.edges=s.edges,n.abrupt("return",s);case 22:if(l={},void 0==s["@context"]){n.next=32;break}return n.next=26,s["@context"];case 26:return c=n.sent,n.next=29,r["compact"](e,c);case 29:l=n.sent,n.next=35;break;case 32:return n.next=34,r["compact"](e,i);case 34:l=n.sent;case 35:return console.log("compacted loaded",l),"vis"==l.type&&(t.network.nodes=[],t.network.edges=[],Array.isArray(l.nodes)?t.network.nodes=l.nodes:t.network.nodes.push(l.nodes),Array.isArray(l.edges)?t.network.edges=l.edges:t.network.edges.push(l.edges)),console.log(t.network),n.abrupt("return",l);case 39:case"end":return n.stop()}}),n,null,[[5,11]])})))()},nodeFromLabel:function(e){return{id:"#"+e.trim().split(" ").join("_"),label:e,color:{background:"#D2E5FF",border:"#2B7CE9"},shape:"ellipse"}},edgeFromLabel:function(e){return{from:e.from,to:e.to,label:e.label}},jsonToJsonLd:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},Object.assign(n,e),n["@context"]=i,n.type="vis",t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},jsonToJsonLd1:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["compact"](e,i);case 2:return n=t.sent,n["@id"]="",n["@graph"]=[],e.nodes.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o={},Object.assign(o,t),o["@type"]="ipgs:Node",n["@graph"].push(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.edges.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o={},Object.assign(o,t),o["@type"]="ipgs:Edge",o["from"]={"@id":t.from},o["to"]={"@id":t.to},n["@graph"].push(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},jsonToTtl:function(e){var t="@prefix : <http://smag0.blogspot.fr/spoggy#> . \n";t+="@prefix owl: <http://www.w3.org/2002/07/owl#> . \n",t+="@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . \n",t+="@prefix xml: <http://www.w3.org/XML/1998/namespace> . \n",t+="@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . \n",t+="@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . \n",t+="@prefix smag: <http://smag0.blogspot.fr/spoggy#> . \n",t+="@base <http://smag0.blogspot.fr/spoggy> . \n",t+=" \n";for(var n=new Array,o=new Array,r=0;r<e.edges.length;r++){var a=e.edges[r],i=a.from,s=a.label.replace(/\s/g,"_"),l=a.to,c=e.nodes.find((function(e){return e.id==i})),d=e.nodes.find((function(e){return e.id==l})),u=c.label.replace(/\n/g,"");try{var p=d.label.replace(/\n/g,"")}catch(w){}var f=this.validRdf(i),h=this.validRdf(s),v=this.validRdf(l);-1==f.indexOf(":")&&(f="_:"+f),-1==h.indexOf(":")&&(h=":"+h),-1==v.indexOf(":")&&(v="_:"+v);var g=["owl:AnnotationProperty","owl:ObjectProperty","owl:DatatypeProperty"],y=1;"type"==h||":type"==h||"rdf:type"==h||":a"==h||":est_un"==h||":est_une"==h||":is_a"==h?(h="rdf:type",o.push(v+" rdf:type owl:Class . \n"),y=1):"subClassOf"==h||":subClassOf"==h||"rdfs:subClassOf"==h?h="rdfs:subClassOf":"sameAs"==h||":sameAs"==h?(h="owl:sameAs",y=-1):"ispartof"==h.toLowerCase()||"partof"==h.toLowerCase()||":partof"==h.toLowerCase()||":ispartof"==h.toLowerCase()?(h="smag:partOf",y=1):"comment"!=h.toLowerCase()&&"commentaire"!=h.toLowerCase()&&"//"!=h.toLowerCase()&&"#"!=h.toLowerCase()||(h="rdfs:comment",y=-1),y>=0&&o.push(h+" rdf:type "+g[y]+" . \n");var m=f+" "+h+" "+v+" . \n";m+=f+' rdfs:label "'+u+'" . \n',m+=v+' rdfs:label "'+p+'" . \n',n[r]=m}n=this.uniq_fast(n.sort()),o=this.uniq_fast(o.sort());for(var x=0;x<n.length;x++)t+=n[x];for(var b=0;b<o.length;b++)t+=o[b];return t},uniq_fast:function(e){for(var t={},n=[],o=e.length,r=0,a=0;a<o;a++){var i=e[a];1!==t[i]&&(t[i]=1,n[r++]=i)}return n},validRdf:function(e){var t={type:"uri"};return-1!==e.indexOf(" ")&&(t.type="literal"),e},downloadFile:function(){var e=this.content,t=this.format,n="",o="",r=prompt("Choose a name for the exported file :","Spoggy");if(null!=r&&""!=r){switch(t){case"json":n="application/json",o=r+".json";break;case"ttl":n="text/turtle",o=r+".ttl";break;case"jsonld":n="application/ld+json",o=r+".jsonld";break;default:alert("Format de fichier non reconnu",t)}var a=new Blob([e],{type:n}),i=document.createElement("a");i.download=o,i.innerHTML="Download File",-1!=navigator.userAgent.indexOf("Chrome")?i.href=window.URL.createObjectURL(a):(i.href=window.URL.createObjectURL(a),i.target="_blank",i.style.display="none",document.body.appendChild(i));var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(s),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(i)}),1e3)}}}}},"1f03":function(e,t,n){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},"1f25":function(e,t,n){"use strict";const o=n("5cf7"),r=Symbol("max"),a=Symbol("length"),i=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1;class v{constructor(e){if("number"===typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!==typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[r]=e.max||1/0;const t=e.length||h;if(this[i]="function"!==typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!==typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[r]=e||1/0,m(this)}get max(){return this[r]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,m(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!==typeof e&&(e=h),e!==this[i]&&(this[i]=e,this[a]=0,this[u].forEach(e=>{e.length=this[i](e.value,e.key),this[a]+=e.length})),m(this)}get lengthCalculator(){return this[i]}get length(){return this[a]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let n=this[u].tail;null!==n;){const o=n.prev;w(this,e,n,t),n=o}}forEach(e,t){t=t||this;for(let n=this[u].head;null!==n;){const o=n.next;w(this,e,n,t),n=o}}keys(){return this[u].toArray().map(e=>e.key)}values(){return this[u].toArray().map(e=>e.value)}reset(){this[c]&&this[u]&&this[u].length&&this[u].forEach(e=>this[c](e.key,e.value)),this[p]=new Map,this[u]=new o,this[a]=0}dump(){return this[u].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[u]}set(e,t,n){if(n=n||this[l],n&&"number"!==typeof n)throw new TypeError("maxAge must be a number");const o=n?Date.now():0,s=this[i](t,e);if(this[p].has(e)){if(s>this[r])return x(this,this[p].get(e)),!1;const i=this[p].get(e),l=i.value;return this[c]&&(this[d]||this[c](e,l.value)),l.now=o,l.maxAge=n,l.value=t,this[a]+=s-l.length,l.length=s,this.get(e),m(this),!0}const f=new b(e,t,s,o,n);return f.length>this[r]?(this[c]&&this[c](e,t),!1):(this[a]+=f.length,this[u].unshift(f),this[p].set(e,this[u].head),m(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!y(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[u].tail;return e?(x(this,e),e.value):null}del(e){x(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const o=e[n],r=o.e||0;if(0===r)this.set(o.k,o.v);else{const e=r-t;e>0&&this.set(o.k,o.v,e)}}}prune(){this[p].forEach((e,t)=>g(this,t,!1))}}const g=(e,t,n)=>{const o=e[p].get(t);if(o){const t=o.value;if(y(e,t)){if(x(e,o),!e[s])return}else n&&(e[f]&&(o.value.now=Date.now()),e[u].unshiftNode(o));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},m=e=>{if(e[a]>e[r])for(let t=e[u].tail;e[a]>e[r]&&null!==t;){const n=t.prev;x(e,t),t=n}},x=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[a]-=n.length,e[p].delete(n.key),e[u].removeNode(t)}};class b{constructor(e,t,n,o,r){this.key=e,this.value=t,this.length=n,this.now=o,this.maxAge=r||0}}const w=(e,t,n,o)=>{let r=n.value;y(e,r)&&(x(e,n),e[s]||(r=void 0)),r&&t.call(o,r.value,r.key,e)};e.exports=v},2:function(e,t){},3:function(e,t){},"30ba":function(e,t,n){"use strict";const o=n("ae29"),r=n("458f"),a=n("4284"),i=n("a757");let s;try{s=n(1)}catch(c){}const l={};e.exports=l,l.NQuads=n("65e1"),l.IdentifierIssuer=n("8acc"),l._rdfCanonizeNative=function(e){return e&&(s=e),s},l.canonize=async function(e,t){if(Array.isArray(e)||(e=l.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!s)throw new Error("rdf-canonize-native not available");return new Promise((n,o)=>s.canonize(e,t,(e,t)=>e?o(e):n(t)))}if("URDNA2015"===t.algorithm)return new o(t).main(e);if("URGNA2012"===t.algorithm)return new r(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},l._canonizeSync=function(e,t){if(Array.isArray(e)||(e=l.NQuads.legacyDatasetToQuads(e)),t.useNative){if(s)return s.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new a(t).main(e);if("URGNA2012"===t.algorithm)return new i(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},"32cb":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("editor",{ref:"editor",attrs:{height:"300px",content:e.editorContent.content,options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,tabSize:2},fontSize:14,lang:"python",theme:"eclipse"},on:{onChange:e.editorChange,init:e.editorInit}},[n("div",[n("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups and dropdown menu"}},[n("b-dropdown",{staticClass:"mx-1",scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(" "+e._s(e.editorContent.format)+" ")]},proxy:!0}])},[n("b-dropdown-item",[e._v("json")]),n("b-dropdown-item",[e._v("ttl")]),n("b-dropdown-item",[e._v("jsonld")])],1),n("b-button-group",{staticClass:"mx-1"},[n("b-button",{on:{click:e.download}},[e._v("Download")]),n("b-button",{on:{click:e.save}},[e._v("Save")]),n("b-button",{attrs:{to:"/"}},[e._v("Cancel")])],1)],1)],1)]),n("StorageModal",{attrs:{network:e.network}})],1)},r=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("178c")),i=n("061c"),s=n.n(i);n("2099"),n("8882"),n("8ef6"),n("1d29");console.log(s.a);var l={name:"EditorVue",mixins:[a["a"]],components:{Editor:function(){return n.e("chunk-20611dff").then(n.bind(null,"11f7"))},StorageModal:function(){return Promise.all([n.e("chunk-2848b080"),n.e("chunk-4468475e"),n.e("chunk-395cb32f"),n.e("chunk-1c915693"),n.e("chunk-432a5adc")]).then(n.bind(null,"057d"))}},methods:{download:function(){this.format=this.editorContent.format,this.content=this.editorContent.content,this.downloadFile()},save:function(){this.$store.commit("ipgs/setInputObject",{type:"commande",value:"/s"})},editorChange:function(){console.log(this.editorContent)},editorInit:function(){console.log(this.editorContent)}},computed:{editorContent:{get:function(){return this.$store.state.ipgs.editorContent},set:function(){}},network:{get:function(){return this.$store.state.ipgs.network},set:function(e){this.$store.commit("ipgs/setNetwork",e)}}}},c=l,d=n("2877"),u=Object(d["a"])(c,o,r,!1,null,null,null);t["default"]=u.exports},4:function(e,t){},"40ce":function(e,t,n){"use strict";e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},4142:function(e,t,n){"use strict";const{isSubjectReference:o}=n("c92f"),{createMergedNodeMap:r}=n("796c"),a={};e.exports=a,a.flatten=e=>{const t=r(e),n=[],a=Object.keys(t).sort();for(let r=0;r<a.length;++r){const e=t[a[r]];o(e)||n.push(e)}return n}},4284:function(e,t,n){"use strict";const o=n("8acc"),r=n("5a76"),a=n("c79e"),i=n("65e1");function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new o("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const o of e)this._addBlankNodeQuadInfo({quad:o,component:o.subject}),this._addBlankNodeQuadInfo({quad:o,component:o.object}),this._addBlankNodeQuadInfo({quad:o,component:o.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const o of n)this._hashAndTrackBlankNode({id:o,hashToBlankNodes:t});const r=[...t.keys()].sort(),a=[];for(const o of r){const e=t.get(o);if(e.length>1){a.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const i of a){const e=[];for(const t of i){if(this.canonicalIssuer.hasId(t))continue;const n=new o("_:b");n.getId(t);const r=this.hashNDegreeQuads(t,n);e.push(r)}e.sort(s);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const l=[];for(const o of this.quads){const e={...o};e.subject=this._useCanonicalId({component:e.subject}),e.object=this._useCanonicalId({component:e.object}),e.graph=this._useCanonicalId({component:e.graph}),l.push(i.serializeQuad(e))}return l.sort(),l.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),o=n.quads;for(const r of o){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(i.serializeQuad(n))}t.sort();const a=new r(this.hashAlgorithm);for(const r of t)a.update(r);return n.hash=a.digest(),n.hash}hashRelatedBlankNode(e,t,n,o){let a;a=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const i=new r(this.hashAlgorithm);return i.update(o),"g"!==o&&i.update(this.getRelatedPredicate(t)),i.update(a),i.digest()}hashNDegreeQuads(e,t){const n=new r(this.hashAlgorithm),o=this.createHashToRelated(e,t),i=[...o.keys()].sort();for(const r of i){n.update(r);let e,i="";const s=new a(o.get(r));while(s.hasNext()){const n=s.next();let o=t.clone(),r="";const a=[];let l=!1;for(const e of n)if(this.canonicalIssuer.hasId(e)?r+=this.canonicalIssuer.getId(e):(o.hasId(e)||a.push(e),r+=o.getId(e)),0!==i.length&&r>i){l=!0;break}if(!l){for(const e of a){const t=this.hashNDegreeQuads(e,o);if(r+=o.getId(e),r+=`<${t.hash}>`,o=t.issuer,0!==i.length&&r>i){l=!0;break}}l||(0===i.length||r<i)&&(i=r,e=o)}}n.update(i),t=e}return{hash:n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,o=this.blankNodeInfo.get(e).quads;for(const r of o)this._addRelatedBlankNodeHash({quad:r,component:r.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:r,component:r.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:r,component:r.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),o=t.get(n);o?o.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,o=this.blankNodeInfo.get(n);o?o.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:o,issuer:r,hashToRelated:a}){if("BlankNode"!==t.termType||t.value===o)return;const i=t.value,s=this.hashRelatedBlankNode(i,e,r,n),l=a.get(s);l?l.push(i):a.set(s,[i])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},"458f":function(e,t,n){"use strict";const o=n("ae29");e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const n=new Map,o=this.blankNodeInfo.get(e).quads;let r=0;for(const a of o){let o,i;if("BlankNode"===a.subject.termType&&a.subject.value!==e)i=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;i=a.object.value,o="r"}++r%100===0&&await this._yield();const s=await this.hashRelatedBlankNode(i,a,t,o),l=n.get(s);l?l.push(i):n.set(s,[i])}return n}}},"46bd":function(e,t,n){(function(t,o){
/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2019 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const r=n("30ba"),a=n("89ae"),i=n("0d88"),s=a.IdentifierIssuer,l=n("5950"),c=n("1f25"),d=n("65c2"),u=n("f9a0"),{expand:p}=n("50ca"),{flatten:f}=n("4142"),{fromRDF:h}=n("6f5c"),{toRDF:v}=n("7646"),{frameMergedOrDefault:g,cleanupNull:y}=n("e6ed"),{isArray:m,isObject:x,isString:b}=n("68fa"),{isSubjectReference:w}=n("c92f"),{expandIri:j,getInitialContext:I,process:O,processingMode:N}=n("d1e70"),{compact:C,compactIri:S}=n("4d68"),{createNodeMap:k,createMergedNodeMap:R,mergeNodeMaps:D}=n("796c"),L="undefined"!==typeof t&&t.versions&&t.versions.node,E=!L&&("undefined"!==typeof window||"undefined"!==typeof self),A=function(e){const t={},A=100,T=new c({max:A});function _(t,{documentLoader:n=e.documentLoader,...o}){return Object.assign({},{documentLoader:n},o,t)}return e.compact=async function(t,n,o){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new l("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let r;o=_(o,{base:b(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new i({sharedCache:T})}),o.link&&(o.skipExpansion=!0),o.compactToRelative||delete o.base,r=o.skipExpansion?t:await e.expand(t,o);const c=await e.processContext(I(o),n,o);let d=await C({activeCtx:c,element:r,options:o,compactionMap:o.compactionMap});o.compactArrays&&!o.graph&&m(d)?1===d.length?d=d[0]:0===d.length&&(d={}):o.graph&&x(d)&&(d=[d]),x(n)&&"@context"in n&&(n=n["@context"]),n=a.clone(n),m(n)||(n=[n]);const u=n;n=[];for(let e=0;e<u.length;++e)(!x(u[e])||Object.keys(u[e]).length>0)&&n.push(u[e]);const p=n.length>0;if(1===n.length&&(n=n[0]),m(d)){const e=S({activeCtx:c,iri:"@graph",relativeTo:{vocab:!0}}),t=d;d={},p&&(d["@context"]=n),d[e]=t}else if(x(d)&&p){const e=d;d={"@context":n};for(const t in e)d[t]=e[t]}return d},e.expand=async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");n=_(n,{keepFreeFloatingNodes:!1,contextResolver:new i({sharedCache:T})}),!1===n.expansionMap&&(n.expansionMap=void 0);const o={},r=[];if("expandContext"in n){const e=a.clone(n.expandContext);x(e)&&"@context"in e?o.expandContext=e:o.expandContext={"@context":e},r.push(o.expandContext)}let s;if(b(t)){const a=await e.get(t,n);s=a.documentUrl,o.input=a.document,a.contextUrl&&(o.remoteContext={"@context":a.contextUrl},r.push(o.remoteContext))}else o.input=a.clone(t);"base"in n||(n.base=s||"");let l=I(n);for(const e of r)l=await O({activeCtx:l,localCtx:e,options:n});let c=await p({activeCtx:l,element:o.input,options:n,expansionMap:n.expansionMap});return x(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),m(c)||(c=[c]),c},e.flatten=async function(t,n,o){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"===typeof n?null:n||null,o=_(o,{base:b(t)?t:"",contextResolver:new i({sharedCache:T})});const r=await e.expand(t,o),a=f(r);if(null===n)return a;o.graph=!0,o.skipExpansion=!0;const s=await e.compact(a,n,o);return s},e.frame=async function(t,n,o){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(o=_(o,{base:b(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new i({sharedCache:T})}),b(n)){const t=await e.get(n,o);if(n=t.document,t.contextUrl){let e=n["@context"];e?m(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const r=n&&n["@context"]||{},a=await e.processContext(I(o),r,o);o.hasOwnProperty("omitGraph")||(o.omitGraph=N(a,1.1)),o.hasOwnProperty("pruneBlankNodeIdentifiers")||(o.pruneBlankNodeIdentifiers=N(a,1.1));const s=await e.expand(t,o),l={...o};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const c=await e.expand(n,l),d=Object.keys(n).map(e=>j(a,e,{vocab:!0}));l.merged=!d.includes("@graph"),l.is11=N(a,1.1);const u=g(s,c,l);l.graph=!o.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let p=await e.compact(u,r,l);return l.link={},p=y(p,l),p},e.link=async function(t,n,o){const r={};return n&&(r["@context"]=n),r["@embed"]="@link",e.frame(t,r,o)},e.normalize=e.canonize=async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(n=_(n,{base:b(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new i({sharedCache:T})}),"inputFormat"in n){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new l("Unknown canonicalization input format.","jsonld.CanonizeError");const e=d.parse(t);return r.canonize(e,n)}const o={...n};delete o.format,o.produceGeneralizedRdf=!1;const a=await e.toRDF(t,o);return r.canonize(a,n)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=_(n,{format:b(e)?"application/n-quads":void 0});const{format:o}=n;let{rdfParser:r}=n;if(o){if(r=r||t[o],!r)throw new l("Unknown input format.","jsonld.UnknownFormat",{format:o})}else r=()=>e;const a=await r(e);return h(a,n)},e.toRDF=async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let o;n=_(n,{base:b(t)?t:"",skipExpansion:!1,contextResolver:new i({sharedCache:T})}),o=n.skipExpansion?t:await e.expand(t,n);const r=v(o,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return await d.serialize(r);throw new l("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return r},e.createNodeMap=async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=_(n,{base:b(t)?t:"",contextResolver:new i({sharedCache:T})});const o=await e.expand(t,n);return R(o,n)},e.merge=async function(t,n,o){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"===typeof n?null:n||null,o=_(o,{contextResolver:new i({sharedCache:T})});const r=await Promise.all(t.map(t=>{const n={...o};return e.expand(t,n)}));let l=!0;"mergeNodes"in o&&(l=o.mergeNodes);const c=o.issuer||new s("_:b"),d={"@default":{}};for(let e=0;e<r.length;++e){const t=a.relabelBlankNodes(r[e],{issuer:new s("_:b"+e+"-")}),n=l||0===e?d:{"@default":{}};if(k(t,n,"@default",c),n!==d)for(const e in n){const t=n[e];if(!(e in d)){d[e]=t;continue}const o=d[e];for(const e in t)e in o||(o[e]=t[e])}}const u=D(d),p=[],f=Object.keys(u).sort();for(let e=0;e<f.length;++e){const t=u[f[e]];w(t)||p.push(t)}if(null===n)return p;o.graph=!0,o.skipExpansion=!0;const h=await e.compact(p,n,o);return h},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new l("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let o;o="function"===typeof n.documentLoader?n.documentLoader:e.documentLoader;const r=await o(t);try{if(!r.document)throw new l("No remote document found at the given URL.","jsonld.NullRemoteDocument");b(r.document)&&(r.document=JSON.parse(r.document))}catch(a){throw new l("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:r})}return r},e.processContext=async function(e,t,n){return n=_(n,{base:"",contextResolver:new i({sharedCache:T})}),null===t?I(n):(t=a.clone(t),x(t)&&"@context"in t||(t={"@context":t}),O({activeCtx:e,localCtx:t,options:n}))},e.getContextValue=n("d1e70").getContextValue,e.documentLoaders={},e.documentLoaders.node=n("fdb5"),e.documentLoaders.xhr=n("7156"),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new l('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",d.parse),e.registerRDFParser("application/nquads",d.parse),e.registerRDFParser("rdfa-api",u.parse),e.url=n("ddd7"),e.util=a,Object.assign(e,a),e.promises=e,e.RequestQueue=n("40ce"),e.JsonLdProcessor=n("8322")(e),E&&"undefined"===typeof o.JsonLdProcessor&&Object.defineProperty(o,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),L?e.useDocumentLoader("node"):"undefined"!==typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},T=function(){return A((function(){return T()}))};A(T),e.exports=T}).call(this,n("4362"),n("c8ba"))},"4d68":function(e,t,n){"use strict";const o=n("5950"),{isArray:r,isObject:a,isString:i,isUndefined:s}=n("68fa"),{isList:l,isValue:c,isGraph:d,isSimpleGraph:u,isSubjectReference:p}=n("c92f"),{expandIri:f,getContextValue:h,isKeyword:v,process:g,processingMode:y}=n("d1e70"),{removeBase:m,prependBase:x}=n("ddd7"),{addValue:b,asArray:w,compareShortestLeast:j}=n("89ae"),I={};function O(e,t,n,o,r,i){null===i&&(i="@null");const s=[];if(("@id"===i||"@reverse"===i)&&a(n)&&"@id"in n){"@reverse"===i&&s.push("@reverse");const t=I.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(i);const e=s.find(e=>e.includes("_"));e&&s.push(e.replace(/^[^_]+_/,"_"))}s.push("@none");const l=e.inverse[t];for(const a of o){if(!(a in l))continue;const e=l[a][r];for(const t of s)if(t in e)return e[t]}return null}function N(e,t,n){if("@nest"!==f(e,t,{vocab:!0},n))throw new o("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=I,I.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:f={},compactionMap:m=(()=>{})})=>{if(r(n)){let o=[];for(let r=0;r<n.length;++r){let a=await I.compact({activeCtx:e,activeProperty:t,element:n[r],options:f,compactionMap:m});null===a&&(a=await m({unmappedValue:n[r],activeCtx:e,activeProperty:t,parent:n,index:r,options:f}),void 0===a)||o.push(a)}if(f.compactArrays&&1===o.length){const n=h(e,t,"@container")||[];0===n.length&&(o=o[0])}return o}const x=h(e,t,"@context");if(s(x)||(e=await g({activeCtx:e,localCtx:x,propagate:!0,overrideProtected:!0,options:f})),a(n)){if(f.link&&"@id"in n&&f.link.hasOwnProperty(n["@id"])){const e=f.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(c(n)||p(n)){const o=I.compactValue({activeCtx:e,activeProperty:t,value:n,options:f});return f.link&&p(n)&&(f.link.hasOwnProperty(n["@id"])||(f.link[n["@id"]]=[]),f.link[n["@id"]].push({expanded:n,compacted:o})),o}if(l(n)){const o=h(e,t,"@container")||[];if(o.includes("@list"))return I.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:f,compactionMap:m})}const x="@reverse"===t,j={},O=e;c(n)||p(n)||(e=e.revertToPreviousContext());const C=h(O,t,"@context");s(C)||(e=await g({activeCtx:e,localCtx:C,propagate:!0,overrideProtected:!0,options:f})),f.link&&"@id"in n&&(f.link.hasOwnProperty(n["@id"])||(f.link[n["@id"]]=[]),f.link[n["@id"]].push({expanded:n,compacted:j}));let S=n["@type"]||[];S.length>1&&(S=Array.from(S).sort());const k=e;for(const t of S){const n=I.compactIri({activeCtx:k,iri:t,relativeTo:{vocab:!0}}),o=h(O,n,"@context");s(o)||(e=await g({activeCtx:e,localCtx:o,options:f,propagate:!1}))}const R=Object.keys(n).sort();for(const s of R){const p=n[s];if("@id"!==s)if("@type"!==s)if("@reverse"!==s)if("@preserve"!==s)if("@index"!==s)if("@graph"!==s&&"@list"!==s&&"@included"!==s&&v(s)){const t=I.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(j,t,p)}else{if(!r(p))throw new o("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===p.length){const t=I.compactIri({activeCtx:e,iri:s,value:p,relativeTo:{vocab:!0},reverse:x}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let o=j;n&&(N(e,n,f),a(j[n])||(j[n]={}),o=j[n]),b(o,t,p,{propertyIsArray:!0})}for(const t of p){const n=I.compactIri({activeCtx:e,iri:s,value:t,relativeTo:{vocab:!0},reverse:x}),o=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let p=j;o&&(N(e,o,f),a(j[o])||(j[o]={}),p=j[o]);const v=h(e,n,"@container")||[],g=d(t),y=l(t);let O;y?O=t["@list"]:g&&(O=t["@graph"]);let C=await I.compact({activeCtx:e,activeProperty:n,element:y||g?O:t,options:f,compactionMap:m});if(y){if(r(C)||(C=[C]),v.includes("@list")){b(p,n,C,{valueIsArray:!0,allowDuplicate:!0});continue}C={[I.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:C},"@index"in t&&(C[I.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(g)if(v.includes("@graph")&&(v.includes("@id")||v.includes("@index")&&u(t))){let o;p.hasOwnProperty(n)?o=p[n]:p[n]=o={};const r=(v.includes("@id")?t["@id"]:t["@index"])||I.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});b(o,r,C,{propertyIsArray:!f.compactArrays||v.includes("@set")})}else v.includes("@graph")&&u(t)?(r(C)&&C.length>1&&(C={"@included":C}),b(p,n,C,{propertyIsArray:!f.compactArrays||v.includes("@set")})):(r(C)&&1===C.length&&f.compactArrays&&(C=C[0]),C={[I.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:C},"@id"in t&&(C[I.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(C[I.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),b(p,n,C,{propertyIsArray:!f.compactArrays||v.includes("@set")}));else if(v.includes("@language")||v.includes("@index")||v.includes("@id")||v.includes("@type")){let o,r;if(p.hasOwnProperty(n)?o=p[n]:p[n]=o={},v.includes("@language"))c(C)&&(C=C["@value"]),r=t["@language"];else if(v.includes("@index")){const o=h(e,n,"@index")||"@index",a=I.compactIri({activeCtx:e,iri:o,relativeTo:{vocab:!0}});if("@index"===o)r=t["@index"],delete C[a];else{let e;if([r,...e]=w(C[o]||[]),i(r))switch(e.length){case 0:delete C[o];break;case 1:C[o]=e[0];break;default:C[o]=e;break}else r=null}}else if(v.includes("@id")){const t=I.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});r=C[t],delete C[t]}else if(v.includes("@type")){const o=I.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let a;switch([r,...a]=w(C[o]||[]),a.length){case 0:delete C[o];break;case 1:C[o]=a[0];break;default:C[o]=a;break}1===Object.keys(C).length&&"@id"in t&&(C=await I.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:f,compactionMap:m}))}r||(r=I.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),b(o,r,C,{propertyIsArray:v.includes("@set")})}else{const e=!f.compactArrays||v.includes("@set")||v.includes("@list")||r(C)&&0===C.length||"@list"===s||"@graph"===s;b(p,n,C,{propertyIsArray:e})}}}else{const n=h(e,t,"@container")||[];if(n.includes("@index"))continue;const o=I.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(j,o,p)}else{const n=await I.compact({activeCtx:e,activeProperty:t,element:p,options:f,compactionMap:m});r(n)&&0===n.length||b(j,s,n)}else{const t=await I.compact({activeCtx:e,activeProperty:"@reverse",element:p,options:f,compactionMap:m});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const o=t[n],r=h(e,n,"@container")||[],a=r.includes("@set")||!f.compactArrays;b(j,n,o,{propertyIsArray:a}),delete t[n]}if(Object.keys(t).length>0){const n=I.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(j,n,t)}}else{let t=w(p).map(e=>I.compactIri({activeCtx:O,iri:e,relativeTo:{vocab:!0}}));1===t.length&&(t=t[0]);const n=I.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),o=h(e,n,"@container")||[],a=o.includes("@set")&&y(e,1.1),i=a||r(t)&&0===p.length;b(j,n,t,{propertyIsArray:i})}else{let t=w(p).map(t=>I.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:f.base}));1===t.length&&(t=t[0]);const n=I.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});j[n]=t}}return j}return n},I.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:i=!1,base:s=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const u=e.getInverse();if(v(t)&&t in u&&"@none"in u[t]&&"@type"in u[t]["@none"]&&"@none"in u[t]["@none"]["@type"])return u[t]["@none"]["@type"]["@none"];if(r.vocab&&t in u){const o=e["@language"]||"@none",r=[];a(n)&&"@index"in n&&!("@graph"in n)&&r.push("@index","@index@set"),a(n)&&"@preserve"in n&&(n=n["@preserve"][0]),d(n)?("@index"in n&&r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&r.push("@graph@id","@graph@id@set"),r.push("@graph","@graph@set","@set"),"@index"in n||r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||r.push("@graph@id","@graph@id@set")):a(n)&&!c(n)&&r.push("@id","@id@set","@type","@set@type");let s="@language",u="@null";if(i)s="@type",u="@reverse",r.push("@set");else if(l(n)){"@index"in n||r.push("@list");const e=n["@list"];if(0===e.length)s="@any",u="@none";else{let t=0===e.length?o:null,n=null;for(let o=0;o<e.length;++o){const r=e[o];let a="@none",i="@none";if(c(r))if("@direction"in r){const e=(r["@language"]||"").toLowerCase(),t=r["@direction"];a=`${e}_${t}`}else"@language"in r?a=r["@language"].toLowerCase():"@type"in r?i=r["@type"]:a="@null";else i="@id";if(null===t?t=a:a!==t&&c(r)&&(t="@none"),null===n?n=i:i!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(s="@type",u=n):u=t}}else{if(c(n))if("@language"in n&&!("@index"in n)){r.push("@language","@language@set"),u=n["@language"];const e=n["@direction"];e&&(u=`${u}_${e}`)}else"@direction"in n&&!("@index"in n)?u="_"+n["@direction"]:"@type"in n&&(s="@type",u=n["@type"]);else s="@type",u="@id";r.push("@set")}r.push("@none"),a(n)&&!("@index"in n)&&r.push("@index","@index@set"),c(n)&&1===Object.keys(n).length&&r.push("@language","@language@set");const p=O(e,t,n,r,s,u);if(null!==p)return p}if(r.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const o=t.substr(n.length);if(!e.mappings.has(o))return o}}let p=null;const f=[];let h=e.fastCurieMap;const g=t.length-1;for(let o=0;o<g&&t[o]in h;++o)h=h[t[o]],""in h&&f.push(h[""][0]);for(let o=f.length-1;o>=0;--o){const r=f[o],a=r.terms;for(const o of a){const a=o+":"+t.substr(r.iri.length),i=e.mappings.get(o)._prefix&&(!e.mappings.has(a)||null===n&&e.mappings.get(a)["@id"]===t);i&&(null===p||j(a,p)<0)&&(p=a)}}if(null!==p)return p;for(const[a,l]of e.mappings)if(l&&l._prefix&&t.startsWith(a+":"))throw new o(`Absolute IRI "${t}" confused with prefix "${a}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return r.vocab?t:"@base"in e?e["@base"]?m(x(s,e["@base"]),t):t:m(s,t)},I.compactValue=({activeCtx:e,activeProperty:t,value:n,options:o})=>{if(c(n)){const o=h(e,t,"@type"),r=h(e,t,"@language"),a=h(e,t,"@direction"),s=h(e,t,"@container")||[],l="@index"in n&&!s.includes("@index");if(!l&&"@none"!==o){if(n["@type"]===o)return n["@value"];if("@language"in n&&n["@language"]===r&&"@direction"in n&&n["@direction"]===a)return n["@value"];if("@language"in n&&n["@language"]===r)return n["@value"];if("@direction"in n&&n["@direction"]===a)return n["@value"]}const c=Object.keys(n).length,d=1===c||2===c&&"@index"in n&&!l,u="@language"in e,p=i(n["@value"]),f=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(d&&"@none"!==o&&(!u||!p||f))return n["@value"];const v={};return l&&(v[I.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?v[I.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=I.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(v[I.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(v[I.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),v[I.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],v}const r=f(e,t,{vocab:!0},o),a=h(e,t,"@type"),s=I.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===a},base:o.base});return"@id"===a||"@vocab"===a||"@graph"===r?s:{[I.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}}},"50ca":function(e,t,n){"use strict";const o=n("5950"),{isArray:r,isObject:a,isEmptyObject:i,isString:s,isUndefined:l}=n("68fa"),{isList:c,isValue:d,isGraph:u,isSubject:p}=n("c92f"),{expandIri:f,getContextValue:h,isKeyword:v,process:g,processingMode:y}=n("d1e70"),{isAbsolute:m}=n("ddd7"),{addValue:x,asArray:b,getValues:w,validateTypeValue:j}=n("89ae"),I={};e.exports=I;const O=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function N({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:u,expandedParent:w,options:C={},insideList:R,typeKey:D,typeScopedContext:L,expansionMap:E}){const A=Object.keys(u).sort(),T=[];let _;const P=u[D]&&"@json"===f(e,r(u[D])?u[D][0]:u[D],{vocab:!0},C);for(const N of A){let D,A=u[N];if("@context"===N)continue;let M=f(e,N,{vocab:!0},C);if((null===M||!m(M)&&!v(M))&&(M=E({unmappedProperty:N,activeCtx:e,activeProperty:t,parent:u,options:C,insideList:R,value:A,expandedParent:w}),void 0===M))continue;if(v(M)){if("@reverse"===n)throw new o("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:A});if(M in w&&"@included"!==M&&"@type"!==M)throw new o("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:M})}if("@id"===M){if(!s(A)){if(!C.isFrame)throw new o('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:A});if(a(A)){if(!i(A))throw new o('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:A})}else{if(!r(A))throw new o('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:A});if(!A.every(e=>s(e)))throw new o('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:A})}}x(w,"@id",b(A).map(t=>s(t)?f(e,t,{base:!0},C):t),{propertyIsArray:C.isFrame});continue}if("@type"===M){a(A)&&(A=Object.fromEntries(Object.entries(A).map(([e,t])=>[f(L,e,{vocab:!0}),b(t).map(e=>f(L,e,{base:!0,vocab:!0}))]))),j(A,C.isFrame),x(w,"@type",b(A).map(e=>s(e)?f(L,e,{base:!0,vocab:!0},C):e),{propertyIsArray:C.isFrame});continue}if("@included"===M&&y(e,1.1)){const n=b(await I.expand({activeCtx:e,activeProperty:t,element:A,options:C,expansionMap:E}));if(!n.every(e=>p(e)))throw new o("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:A});x(w,"@included",n,{propertyIsArray:!0});continue}if("@graph"===M&&!a(A)&&!r(A))throw new o('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:A});if("@value"===M){_=A,P&&y(e,1.1)?w["@value"]=A:x(w,"@value",A,{propertyIsArray:C.isFrame});continue}if("@language"===M){if(null===A)continue;if(!s(A)&&!C.isFrame)throw new o('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:A});A=b(A).map(e=>s(e)?e.toLowerCase():e);for(const e of A)s(e)&&!e.match(O)&&console.warn("@language must be valid BCP47: "+e);x(w,"@language",A,{propertyIsArray:C.isFrame});continue}if("@direction"===M){if(!s(A)&&!C.isFrame)throw new o('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:A});A=b(A);for(const e of A)if(s(e)&&"ltr"!==e&&"rtl"!==e)throw new o('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:A});x(w,"@direction",A,{propertyIsArray:C.isFrame});continue}if("@index"===M){if(!s(A))throw new o('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:A});x(w,"@index",A);continue}if("@reverse"===M){if(!a(A))throw new o('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:A});if(D=await I.expand({activeCtx:e,activeProperty:"@reverse",element:A,options:C,expansionMap:E}),"@reverse"in D)for(const e in D["@reverse"])x(w,e,D["@reverse"][e],{propertyIsArray:!0});let t=w["@reverse"]||null;for(const e in D){if("@reverse"===e)continue;null===t&&(t=w["@reverse"]={}),x(t,e,[],{propertyIsArray:!0});const n=D[e];for(let r=0;r<n.length;++r){const a=n[r];if(d(a)||c(a))throw new o('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:D});x(t,e,a,{propertyIsArray:!0})}}continue}if("@nest"===M){T.push(N);continue}let J=e;const F=h(e,N,"@context");l(F)||(J=await g({activeCtx:e,localCtx:F,propagate:!0,overrideProtected:!0,options:C}));const B=h(J,N,"@container")||[];if(B.includes("@language")&&a(A)){const e=h(J,N,"@direction");D=S(J,A,e,C)}else if(B.includes("@index")&&a(A)){const t=B.includes("@graph"),n=h(J,N,"@index")||"@index",o="@index"!==n&&f(e,n,{vocab:!0},C);D=await k({activeCtx:J,options:C,activeProperty:N,value:A,expansionMap:E,asGraph:t,indexKey:n,propertyIndex:o})}else if(B.includes("@id")&&a(A)){const e=B.includes("@graph");D=await k({activeCtx:J,options:C,activeProperty:N,value:A,expansionMap:E,asGraph:e,indexKey:"@id"})}else if(B.includes("@type")&&a(A))D=await k({activeCtx:J.revertToPreviousContext(),options:C,activeProperty:N,value:A,expansionMap:E,asGraph:!1,indexKey:"@type"});else{const o="@list"===M;if(o||"@set"===M){let e=t;o&&"@graph"===n&&(e=null),D=await I.expand({activeCtx:J,activeProperty:e,element:A,options:C,insideList:o,expansionMap:E})}else D="@json"===h(e,N,"@type")?{"@type":"@json","@value":A}:await I.expand({activeCtx:J,activeProperty:N,element:A,options:C,insideList:!1,expansionMap:E})}if(null!==D||"@value"===M||(D=E({unmappedValue:A,expandedProperty:M,activeCtx:J,activeProperty:t,parent:u,options:C,insideList:R,key:N,expandedParent:w}),void 0!==D))if("@list"!==M&&!c(D)&&B.includes("@list")&&(D={"@list":b(D)}),B.includes("@graph")&&!B.some(e=>"@id"===e||"@index"===e)&&(D=b(D).map(e=>({"@graph":b(e)}))),J.mappings.has(N)&&J.mappings.get(N).reverse){const e=w["@reverse"]=w["@reverse"]||{};D=b(D);for(let t=0;t<D.length;++t){const n=D[t];if(d(n)||c(n))throw new o('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:D});x(e,M,n,{propertyIsArray:!0})}}else x(w,M,D,{propertyIsArray:!0})}if("@value"in w)if("@json"===w["@type"]&&y(e,1.1));else if((a(_)||r(_))&&!C.isFrame)throw new o('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:_});for(const i of T){const s=r(u[i])?u[i]:[u[i]];for(const r of s){if(!a(r)||Object.keys(r).some(t=>"@value"===f(e,t,{vocab:!0},C)))throw new o("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:r});await N({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:w,options:C,insideList:R,typeScopedContext:L,typeKey:D,expansionMap:E})}}}function C({activeCtx:e,activeProperty:t,value:n,options:o}){if(null===n||void 0===n)return null;const r=f(e,t,{vocab:!0},o);if("@id"===r)return f(e,n,{base:!0},o);if("@type"===r)return f(e,n,{vocab:!0,base:!0},o);const a=h(e,t,"@type");if(("@id"===a||"@graph"===r)&&s(n))return{"@id":f(e,n,{base:!0},o)};if("@vocab"===a&&s(n))return{"@id":f(e,n,{vocab:!0,base:!0},o)};if(v(r))return n;const i={};if(a&&!["@id","@vocab","@none"].includes(a))i["@type"]=a;else if(s(n)){const n=h(e,t,"@language");null!==n&&(i["@language"]=n);const o=h(e,t,"@direction");null!==o&&(i["@direction"]=o)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),i["@value"]=n,i}function S(e,t,n,a){const i=[],l=Object.keys(t).sort();for(const c of l){const l=f(e,c,{vocab:!0},a);let d=t[c];r(d)||(d=[d]);for(const e of d){if(null===e)continue;if(!s(e))throw new o("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const r={"@value":e};"@none"!==l&&(r["@language"]=c.toLowerCase()),n&&(r["@direction"]=n),i.push(r)}}return i}async function k({activeCtx:e,options:t,activeProperty:n,value:a,expansionMap:i,asGraph:s,indexKey:c,propertyIndex:p}){const v=[],y=Object.keys(a).sort(),m="@type"===c;for(let b of y){if(m){const n=h(e,b,"@context");l(n)||(e=await g({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let y,w=a[b];r(w)||(w=[w]),w=await I.expand({activeCtx:e,activeProperty:n,element:w,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),y=p?"@none"===b?"@none":C({activeCtx:e,activeProperty:c,value:b,options:t}):f(e,b,{vocab:!0},t),"@id"===c?b=f(e,b,{base:!0},t):m&&(b=y);for(let e of w){if(s&&!u(e)&&(e={"@graph":[e]}),"@type"===c)"@none"===y||(e["@type"]?e["@type"]=[b].concat(e["@type"]):e["@type"]=[b]);else{if(d(e)&&!["@language","@type","@index"].includes(c))throw new o(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${c}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});p?"@none"!==y&&x(e,p,y,{propertyIsArray:!0,prependValue:!0}):"@none"===y||c in e||(e[c]=b)}v.push(e)}}return v}I.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:c={},insideList:d=!1,insideIndex:u=!1,typeScopedContext:p=null,expansionMap:v=(()=>{})})=>{if(null===n||void 0===n)return null;if("@default"===t&&(c=Object.assign({},c,{isFrame:!1})),!r(n)&&!a(n)){if(!d&&(null===t||"@graph"===f(e,t,{vocab:!0},c))){const o=await v({unmappedValue:n,activeCtx:e,activeProperty:t,options:c,insideList:d});return void 0===o?null:o}return C({activeCtx:e,activeProperty:t,value:n,options:c})}if(r(n)){let o=[];const a=h(e,t,"@container")||[];d=d||a.includes("@list");for(let i=0;i<n.length;++i){let a=await I.expand({activeCtx:e,activeProperty:t,element:n[i],options:c,expansionMap:v,insideIndex:u,typeScopedContext:p});d&&r(a)&&(a={"@list":a}),null===a&&(a=await v({unmappedValue:n[i],activeCtx:e,activeProperty:t,parent:n,index:i,options:c,expandedParent:o,insideList:d}),void 0===a)||(r(a)?o=o.concat(a):o.push(a))}return o}const x=f(e,t,{vocab:!0},c),j=h(e,t,"@context");p=p||(e.previousContext?e:null);let O=Object.keys(n).sort(),S=!u;if(S&&p&&O.length<=2&&!O.includes("@context"))for(const o of O){const t=f(p,o,{vocab:!0},c);if("@value"===t){S=!1,e=p;break}if("@id"===t&&1===O.length){S=!1;break}}S&&(e=e.revertToPreviousContext()),l(j)||(e=await g({activeCtx:e,localCtx:j,propagate:!0,overrideProtected:!0,options:c})),"@context"in n&&(e=await g({activeCtx:e,localCtx:n["@context"],options:c})),p=e;let k=null;for(const o of O){const t=f(e,o,{vocab:!0},c);if("@type"===t){k=k||o;const t=n[o],r=Array.isArray(t)?t.length>1?t.slice().sort():t:[t];for(const n of r){const t=h(p,n,"@context");l(t)||(e=await g({activeCtx:e,localCtx:t,options:c,propagate:!1}))}}}let R={};await N({activeCtx:e,activeProperty:t,expandedActiveProperty:x,element:n,expandedParent:R,options:c,insideList:d,typeKey:k,typeScopedContext:p,expansionMap:v}),O=Object.keys(R);let D=O.length;if("@value"in R){if("@type"in R&&("@language"in R||"@direction"in R))throw new o('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:R});let r=D-1;if("@type"in R&&(r-=1),"@index"in R&&(r-=1),"@language"in R&&(r-=1),"@direction"in R&&(r-=1),0!==r)throw new o('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:R});const a=null===R["@value"]?[]:b(R["@value"]),l=w(R,"@type");if(y(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===a.length){const o=await v({unmappedValue:R,activeCtx:e,activeProperty:t,element:n,options:c,insideList:d});R=void 0!==o?o:null}else{if(!a.every(e=>s(e)||i(e))&&"@language"in R)throw new o("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:R});if(!l.every(e=>m(e)&&!(s(e)&&0===e.indexOf("_:"))||i(e)))throw new o('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:R})}}else if("@type"in R&&!r(R["@type"]))R["@type"]=[R["@type"]];else if("@set"in R||"@list"in R){if(D>1&&(2!==D||!("@index"in R)))throw new o('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:R});"@set"in R&&(R=R["@set"],O=Object.keys(R),D=O.length)}else if(1===D&&"@language"in R){const o=await v(R,{unmappedValue:R,activeCtx:e,activeProperty:t,element:n,options:c,insideList:d});R=void 0!==o?o:null}if(a(R)&&!c.keepFreeFloatingNodes&&!d&&(null===t||"@graph"===x)&&(0===D||"@value"in R||"@list"in R||1===D&&"@id"in R)){const o=await v({unmappedValue:R,activeCtx:e,activeProperty:t,element:n,options:c,insideList:d});R=void 0!==o?o:null}return R}},5319:function(e,t,n){"use strict";var o=n("d784"),r=n("825a"),a=n("50c4"),i=n("a691"),s=n("1d80"),l=n("8aa5"),c=n("0cb2"),d=n("14c3"),u=Math.max,p=Math.min,f=function(e){return void 0===e?e:String(e)};o("replace",2,(function(e,t,n,o){var h=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=o.REPLACE_KEEPS_$0,g=h?"$":"$0";return[function(n,o){var r=s(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,r,o):t.call(String(r),n,o)},function(e,o){if(!h&&v||"string"===typeof o&&-1===o.indexOf(g)){var s=n(t,e,this,o);if(s.done)return s.value}var y=r(e),m=String(this),x="function"===typeof o;x||(o=String(o));var b=y.global;if(b){var w=y.unicode;y.lastIndex=0}var j=[];while(1){var I=d(y,m);if(null===I)break;if(j.push(I),!b)break;var O=String(I[0]);""===O&&(y.lastIndex=l(m,a(y.lastIndex),w))}for(var N="",C=0,S=0;S<j.length;S++){I=j[S];for(var k=String(I[0]),R=u(p(i(I.index),m.length),0),D=[],L=1;L<I.length;L++)D.push(f(I[L]));var E=I.groups;if(x){var A=[k].concat(D,R,m);void 0!==E&&A.push(E);var T=String(o.apply(void 0,A))}else T=c(k,m,R,D,E,o);R>=C&&(N+=m.slice(C,R)+T,C=R+k.length)}return N+m.slice(C)}]}))},5406:function(e){e.exports=JSON.parse('{"@context":{"rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfs":"http://www.w3.org/2000/01/rdf-schema#","owl":"http://www.w3.org/2002/07/owl#","ldp":"http://www.w3.org/ns/ldp#","xsd":"http://www.w3.org/2001/XMLSchema#","dcterms":"http://purl.org/dc/terms/","foaf":"http://xmlns.com/foaf/0.1/","wdrs":"http://www.w3.org/2007/05/powder-s#","vs":"http://www.w3.org/2003/06/sw-vocab-status/ns#","bt":"http://example.org/vocab/bugtracker#","contains":{"@id":"ldp:contains","@type":"@id"},"hasMemberRelation":{"@id":"ldp:hasMemberRelation","@type":"@id"},"insertedContentRelation":{"@id":"ldp:insertedContentRelation","@type":"@id"},"isMemberOfRelation":{"@id":"ldp:isMemberOfRelation","@type":"@id"},"member":{"@id":"ldp:member","@type":"@id"},"membershipResource":{"@id":"ldp:membershipResource","@type":"@id"},"rdfs:domain":{"@type":"@id"},"rdfs:range":{"@type":"@id"},"rdfs:subClassOf":{"@type":"@id"},"rdfs:subPropertyOf":{"@type":"@id"},"owl:equivalentClass":{"@type":"@vocab"},"owl:equivalentProperty":{"@type":"@vocab"},"owl:imports":{"@type":"@id"},"owl:inverseOf":{"@type":"@vocab"},"owl:oneOf":{"@type":"@vocab","@container":"@list"},"owl:versionInfo":{"@type":"xsd:string","@language":null}},"@graph":[{"@id":"http://www.w3.org/ns/ldp#","@type":"owl:Ontology","dcterms:description":"All vocabulary URIs defined in the Linked Data Platform (LDP) namespace.","hdcterms:title":"The W3C Linked Data Platform (LDP) Vocabulary","rdfs:comment":"This ontology provides an informal representation of the concepts and terms as defined in the LDP specification.  Consult the LDP specification for normative reference.","rdfs:label":"W3C Linked Data Platform (LDP)","rdfs:seeAlso":[{"@id":"http://www.w3.org/TR/ldp/"},{"@id":"http://www.w3.org/TR/ldp-ucr/"},{"@id":"http://www.w3.org/TR/ldp-primer/"}]},{"@id":"ldp:BasicContainer","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"An LDPC that uses a predefined predicate to simply link to its contained resources."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"BasicContainer"}],"rdfs:subClassOf":[{"@id":"ldp:Container"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:member","@type":["rdf:Property"],"rdfs:comment":[{"@value":"LDP servers should use this predicate as the membership predicate if there is no obvious predicate from an application vocabulary to use."}],"rdfs:domain":[{"@id":"ldp:Resource"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"member"}],"rdfs:range":[{"@id":"rdfs:Resource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:RDFSource","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"A Linked Data Platform Resource (LDPR) whose state is represented as RDF."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"RDFSource"}],"rdfs:subClassOf":[{"@id":"ldp:Resource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:PreferContainment","rdfs:comment":[{"@value":"URI identifying a LDPC\'s containment triples, for example to allow clients to express interest in receiving them."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"PreferContainment"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:NonRDFSource","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"A Linked Data Platform Resource (LDPR) whose state is NOT represented as RDF."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"NonRDFSource"}],"rdfs:subClassOf":[{"@id":"ldp:Resource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:Resource","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"A HTTP-addressable resource whose lifecycle is managed by a LDP server."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"Resource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:isMemberOfRelation","@type":["http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"],"rdfs:comment":[{"@value":"Indicates which predicate is used in membership triples, and that the membership triple pattern is < member-URI , object-of-isMemberOfRelation, membership-constant-URI >."}],"rdfs:domain":[{"@id":"ldp:Container"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"isMemmberOfRelation"}],"rdfs:range":[{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:PreferEmptyContainer","rdfs:comment":[{"@value":"URI identifying the subset of a LDPC\'s triples present in an empty LDPC, for example to allow clients to express interest in receiving them.  Currently this excludes containment and membership triples, but in the future other exclusions might be added.  This definition is written to automatically exclude those new classes of triples."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"PreferEmptyContainer"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:contains","@type":["http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"],"rdfs:comment":[{"@value":"Links a container with resources created through the container."}],"rdfs:domain":[{"@id":"ldp:Container"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"contains"}],"rdfs:range":[{"@id":"rdfs:Resource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:PreferMembership","rdfs:comment":[{"@value":"URI identifying a LDPC\'s membership triples, for example to allow clients to express interest in receiving them."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"PreferMembership"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:Container","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"A Linked Data Platform RDF Source (LDP-RS) that also conforms to additional patterns and conventions for managing membership. Readers should refer to the specification defining this ontology for the list of behaviors associated with it."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"Container"}],"rdfs:subClassOf":[{"@id":"ldp:RDFSource"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:IndirectContainer","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"An LDPC that has the flexibility of choosing what form the membership triples take."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"IndirectContainer"}],"rdfs:subClassOf":[{"@id":"ldp:Container"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:hasMemberRelation","@type":["http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"],"rdfs:comment":[{"@value":"Indicates which predicate is used in membership triples, and that the membership triple pattern is < membership-constant-URI , object-of-hasMemberRelation, member-URI >."}],"rdfs:domain":[{"@id":"ldp:Container"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"hasMemberRelation"}],"rdfs:range":[{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:MemberSubject","rdfs:comment":[{"@value":"Used to indicate default and typical behavior for ldp:insertedContentRelation, where the member-URI value in the membership triple added when a creation request is successful is the URI assigned to the newly created resource."}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"MemberSubject"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:membershipResource","@type":["http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"],"rdfs:comment":[{"@value":"Indicates the membership-constant-URI in a membership triple.  Depending upon the membership triple pattern a container uses, as indicated by the presence of ldp:hasMemberRelation or ldp:isMemberOfRelation, the membership-constant-URI might occupy either the subject or object position in membership triples."}],"rdfs:domain":[{"@id":"ldp:Container"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"membershipResource"}],"rdfs:range":[{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:insertedContentRelation","@type":["http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"],"rdfs:comment":[{"@value":"Indicates which triple in a creation request should be used as the member-URI value in the membership triple added when the creation request is successful."}],"rdfs:domain":[{"@id":"ldp:Container"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"insertedContentRelation"}],"rdfs:range":[{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"}],"vs:term_status":[{"@value":"unstable"}]},{"@id":"ldp:DirectContainer","@type":["rdfs:Class"],"rdfs:comment":[{"@value":"An LDPC that is similar to a LDP-DC but it allows an indirection with the ability to list as member a resource, such as a URI representing a real-world object, that is different from the resource that is created"}],"rdfs:isDefinedBy":[{"@id":"http://www.w3.org/ns/ldp#"}],"rdfs:label":[{"@value":"DirectContainer"}],"rdfs:subClassOf":[{"@id":"ldp:Container"}],"vs:term_status":[{"@value":"unstable"}]}]}')},5727:function(e,t,n){"use strict";e.exports=function e(t){return null===t||"object"!==typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((t,n,o)=>{const r=0===o?"":",",a=void 0===n||"symbol"===typeof n?null:n;return t+r+e(a)},"")+"]":"{"+Object.keys(t).sort().reduce((n,o,r)=>{if(void 0===t[o]||"symbol"===typeof t[o])return n;const a=0===n.length?"":",";return n+a+e(o)+":"+e(t[o])},"")+"}"}},5950:function(e,t,n){"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},"5a76":function(e,t,n){"use strict";n("6017");const o=self.crypto||self.msCrypto;e.exports=class{constructor(e){if(!o||!o.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupport algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await o.subtle.digest(this.algorithm,e));let n="";for(let o=0;o<t.length;++o)n+=t[o].toString(16).padStart(2,"0");return n}}},"5cf7":function(e,t,n){"use strict";function o(e){var t=this;if(t instanceof o||(t=new o),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function r(e,t,n){var o=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===o.next&&(e.tail=o),null===o.prev&&(e.head=o),e.length++,o}function a(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,o){if(!(this instanceof s))return new s(e,t,n,o);this.list=o,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=o,o.Node=s,o.create=o,o.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},o.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},o.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},o.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},o.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},o.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},o.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},o.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,o=0;null!==n;o++)e.call(t,n.value,o,this),n=n.next},o.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,o=this.length-1;null!==n;o--)e.call(t,n.value,o,this),n=n.prev},o.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},o.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},o.prototype.map=function(e,t){t=t||this;for(var n=new o,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},o.prototype.mapReverse=function(e,t){t=t||this;for(var n=new o,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},o.prototype.reduce=function(e,t){var n,o=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");o=this.head.next,n=this.head.value}for(var r=0;null!==o;r++)n=e(n,o.value,r),o=o.next;return n},o.prototype.reduceReverse=function(e,t){var n,o=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");o=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==o;r--)n=e(n,o.value,r),o=o.prev;return n},o.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},o.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},o.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new o;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,a=this.head;null!==a&&r<e;r++)a=a.next;for(;null!==a&&r<t;r++,a=a.next)n.push(a.value);return n},o.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new o;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,a=this.tail;null!==a&&r>t;r--)a=a.prev;for(;null!==a&&r>e;r--,a=a.prev)n.push(a.value);return n},o.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var a=[];for(n=0;o&&n<t;n++)a.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(n=2;n<arguments.length;n++)o=r(this,o,arguments[n]);return a},o.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var o=n.prev;n.prev=n.next,n.next=o}return this.head=t,this.tail=e,this};try{n("1f03")(o)}catch(l){}},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var o,r=1,a={},i=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?f():h()?v():e.MessageChannel?g():s&&"onreadystatechange"in s.createElement("script")?y():m(),l.setImmediate=c,l.clearImmediate=d}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return a[r]=i,o(r),r++}function d(e){delete a[e]}function u(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o);break}}function p(e){if(i)setTimeout(p,0,e);else{var t=a[e];if(t){i=!0;try{u(t)}finally{d(e),i=!1}}}}function f(){o=function(e){t.nextTick((function(){p(e)}))}}function h(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function v(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&p(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;p(t)},o=function(t){e.port2.postMessage(t)}}function y(){var e=s.documentElement;o=function(t){var n=s.createElement("script");n.onreadystatechange=function(){p(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function m(){o=function(e){setTimeout(p,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("4362"))},"65c2":function(e,t,n){"use strict";e.exports=n("30ba").NQuads},"65e1":function(e,t,n){"use strict";const o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r=o+"langString",a="http://www.w3.org/2001/XMLSchema#string",i="NamedNode",s="BlankNode",l="Literal",c="DefaultGraph",d={};function u(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&(e.object.termType!==l||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value))}(()=>{const e="(?:<([^:]+:[^>]*)>)",t="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",n=t+"_",o=n+"0-9-·̀-ͯ‿-⁀",r="(_:(?:["+n+"0-9])(?:(?:["+o+".])*(?:["+o+"]))?)",a=r,i='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',s="(?:\\^\\^"+e+")",l="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",c="(?:"+i+"(?:"+s+"|"+l+")?)",u="[ \\t]+",p="[ \\t]*",f="(?:"+e+"|"+a+")"+u,h=e+u,v="(?:"+e+"|"+a+"|"+c+")"+p,g="(?:\\.|(?:(?:"+e+"|"+a+")"+p+"\\.))";d.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,d.empty=new RegExp("^"+p+"$"),d.quad=new RegExp("^"+p+f+h+v+g+p+"$")})(),e.exports=class e{static parse(e){const t=[],n={},o=e.split(d.eoln);let p=0;for(const f of o){if(p++,d.empty.test(f))continue;const e=f.match(d.quad);if(null===e)throw new Error("N-Quads parse error on line "+p+".");const o={subject:null,predicate:null,object:null,graph:null};if(void 0!==e[1]?o.subject={termType:i,value:e[1]}:o.subject={termType:s,value:e[2]},o.predicate={termType:i,value:e[3]},void 0!==e[4]?o.object={termType:i,value:e[4]}:void 0!==e[5]?o.object={termType:s,value:e[5]}:(o.object={termType:l,value:void 0,datatype:{termType:i}},void 0!==e[7]?o.object.datatype.value=e[7]:void 0!==e[8]?(o.object.datatype.value=r,o.object.language=e[8]):o.object.datatype.value=a,o.object.value=v(e[6])),void 0!==e[9]?o.graph={termType:i,value:e[9]}:void 0!==e[10]?o.graph={termType:s,value:e[10]}:o.graph={termType:c,value:""},o.graph.value in n){let e=!0;const r=n[o.graph.value];for(const t of r)if(u(t,o)){e=!1;break}e&&(r.push(o),t.push(o))}else n[o.graph.value]=[o],t.push(o)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const o of t)n.push(e.serializeQuad(o));return n.sort().join("")}static serializeQuad(e){const t=e.subject,n=e.predicate,o=e.object,l=e.graph;let c="";return t.termType===i?c+=`<${t.value}>`:c+=""+t.value,c+=` <${n.value}> `,o.termType===i?c+=`<${o.value}>`:o.termType===s?c+=o.value:(c+=`"${f(o.value)}"`,o.datatype.value===r?o.language&&(c+="@"+o.language):o.datatype.value!==a&&(c+=`^^<${o.datatype.value}>`)),l.termType===i?c+=` <${l.value}>`:l.termType===s&&(c+=" "+l.value),c+=" .\n",c}static legacyDatasetToQuads(e){const t=[],n={"blank node":s,IRI:i,literal:l};for(const o in e){const d=e[o];d.forEach(e=>{const d={};for(const t in e){const o=e[t],s={termType:n[o.type],value:o.value};s.termType===l&&(s.datatype={termType:i},"datatype"in o&&(s.datatype.value=o.datatype),"language"in o?("datatype"in o||(s.datatype.value=r),s.language=o.language):"datatype"in o||(s.datatype.value=a)),d[t]=s}d.graph="@default"===o?{termType:c,value:""}:{termType:o.startsWith("_:")?s:i,value:o},t.push(d)})}return t}};const p=/["\\\n\r]/g;function f(e){return e.replace(p,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}const h=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function v(e){return e.replace(h,(function(e,t,n,o){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(o)throw new Error("Unsupported U escape")}))}},"68fa":function(e,t,n){"use strict";const o={};e.exports=o,o.isArray=Array.isArray,o.isBoolean=e=>"boolean"===typeof e||"[object Boolean]"===Object.prototype.toString.call(e),o.isDouble=e=>o.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),o.isEmptyObject=e=>o.isObject(e)&&0===Object.keys(e).length,o.isNumber=e=>"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e),o.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),o.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),o.isString=e=>"string"===typeof e||"[object String]"===Object.prototype.toString.call(e),o.isUndefined=e=>"undefined"===typeof e},"6f5c":function(e,t,n){"use strict";const o=n("5950"),r=n("c92f"),a=n("68fa"),i=n("89ae"),{RDF_LIST:s,RDF_FIRST:l,RDF_REST:c,RDF_NIL:d,RDF_TYPE:u,RDF_JSON_LITERAL:p,XSD_BOOLEAN:f,XSD_DOUBLE:h,XSD_INTEGER:v,XSD_STRING:g}=n("feb1"),y=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,m={};function x(e,t,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const r={"@value":e.value};if(e.language)r["@language"]=e.language;else{let s=e.datatype.value;if(s||(s=g),s===p){s="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(i){throw new o("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:i})}}if(t){if(s===f)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(a.isNumeric(r["@value"]))if(s===v){const e=parseInt(r["@value"],10);e.toFixed(0)===r["@value"]&&(r["@value"]=e)}else s===h&&(r["@value"]=parseFloat(r["@value"]));[f,v,h,g].includes(s)||(r["@type"]=s)}else if("i18n-datatype"===n&&s.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=s.split(/[#_]/);e.length>0&&(r["@language"]=e,e.match(y)||console.warn("@language must be valid BCP47: "+e)),r["@direction"]=t}else s!==g&&(r["@type"]=s)}return r}e.exports=m,m.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:n=!1,rdfDirection:o=null})=>{const p={},f={"@default":p},h={};for(const r of e){const e="DefaultGraph"===r.graph.termType?"@default":r.graph.value;e in f||(f[e]={}),"@default"===e||e in p||(p[e]={"@id":e});const a=f[e],s=r.subject.value,l=r.predicate.value,c=r.object;s in a||(a[s]={"@id":s});const v=a[s],g=c.termType.endsWith("Node");if(g&&!(c.value in a)&&(a[c.value]={"@id":c.value}),l===u&&!t&&g){i.addValue(v,"@type",c.value,{propertyIsArray:!0});continue}const y=x(c,n,o);if(i.addValue(v,l,y,{propertyIsArray:!0}),g)if(c.value===d){const e=a[c.value];"usages"in e||(e.usages=[]),e.usages.push({node:v,property:l,value:y})}else c.value in h?h[c.value]=!1:h[c.value]={node:v,property:l,value:y}}for(const i in f){const e=f[i];if(!(d in e))continue;const t=e[d];if(t.usages){for(let n of t.usages){let t=n.node,o=n.property,i=n.value;const d=[],u=[];let p=Object.keys(t).length;while(o===c&&a.isObject(h[t["@id"]])&&a.isArray(t[l])&&1===t[l].length&&a.isArray(t[c])&&1===t[c].length&&(3===p||4===p&&a.isArray(t["@type"])&&1===t["@type"].length&&t["@type"][0]===s))if(d.push(t[l][0]),u.push(t["@id"]),n=h[t["@id"]],t=n.node,o=n.property,i=n.value,p=Object.keys(t).length,!r.isBlankNode(t))break;delete i["@id"],i["@list"]=d.reverse();for(const n of u)delete e[n]}delete t.usages}}const v=[],g=Object.keys(p).sort();for(const a of g){const e=p[a];if(a in f){const t=e["@graph"]=[],n=f[a],o=Object.keys(n).sort();for(const e of o){const o=n[e];r.isSubjectReference(o)||t.push(o)}}r.isSubjectReference(e)||v.push(e)}return v}},7156:function(e,t,n){"use strict";const{parseLinkHeader:o,buildHeaders:r}=n("89ae"),{LINK_HEADER_CONTEXT:a}=n("feb1"),i=n("5950"),s=n("40ce"),{prependBase:l}=n("ddd7"),c=/(^|(\r\n))link:/i;function d(e,t,n){e=e||XMLHttpRequest;const o=new e;return new Promise((e,r)=>{o.onload=()=>e(o),o.onerror=e=>r(e),o.open("GET",t,!0);for(const t in n)o.setRequestHeader(t,n[t]);o.send()})}e.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{t=r(t);const u=new s;return u.wrapLoader(p);async function p(r){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))throw new i('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});if(e&&0!==r.indexOf("https"))throw new i('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});let s;try{s=await d(n,r,t)}catch(g){throw new i("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:g})}if(s.status>=400)throw new i("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:s.status});let u={contextUrl:null,documentUrl:r,document:s.response},f=null;const h=s.getResponseHeader("Content-Type");let v;if(c.test(s.getAllResponseHeaders())&&(v=s.getResponseHeader("Link")),v&&"application/ld+json"!==h){const e=o(v),t=e[a];if(Array.isArray(t))throw new i("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});t&&(u.contextUrl=t.target),f=e["alternate"],f&&"application/ld+json"==f.type&&!(h||"").match(/^application\/(\w*\+)?json$/)&&(u=await p(l(r,f.target)))}return u}}},7646:function(e,t,n){"use strict";const{createNodeMap:o}=n("796c"),{isKeyword:r}=n("d1e70"),a=n("c92f"),i=n("5727"),s=n("68fa"),l=n("89ae"),{RDF_FIRST:c,RDF_REST:d,RDF_NIL:u,RDF_TYPE:p,RDF_JSON_LITERAL:f,RDF_LANGSTRING:h,XSD_BOOLEAN:v,XSD_DOUBLE:g,XSD_INTEGER:y,XSD_STRING:m}=n("feb1"),{isAbsolute:x}=n("ddd7"),b={};function w(e,t,n,o,a){const i=Object.keys(t).sort();for(const s of i){const i=t[s],l=Object.keys(i).sort();for(let t of l){const l=i[t];if("@type"===t)t=p;else if(r(t))continue;for(const r of l){const i={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!x(s))continue;const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!x(t))continue;if("BlankNode"===l.termType&&!a.produceGeneralizedRdf)continue;const c=I(r,o,e,n,a.rdfDirection);c&&e.push({subject:i,predicate:l,object:c,graph:n})}}}}function j(e,t,n,o,r){const a={termType:"NamedNode",value:c},i={termType:"NamedNode",value:d},s={termType:"NamedNode",value:u},l=e.pop(),p=l?{termType:"BlankNode",value:t.getId()}:s;let f=p;for(const c of e){const e=I(c,t,n,o,r),s={termType:"BlankNode",value:t.getId()};n.push({subject:f,predicate:a,object:e,graph:o}),n.push({subject:f,predicate:i,object:s,graph:o}),f=s}if(l){const e=I(l,t,n,o,r);n.push({subject:f,predicate:a,object:e,graph:o}),n.push({subject:f,predicate:i,object:s,graph:o})}return p}function I(e,t,n,o,r){const l={};if(a.isValue(e)){l.termType="Literal",l.value=void 0,l.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)l.value=i(t),l.datatype.value=f;else if(s.isBoolean(t))l.value=t.toString(),l.datatype.value=n||v;else if(s.isDouble(t)||n===g)s.isDouble(t)||(t=parseFloat(t)),l.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),l.datatype.value=n||g;else if(s.isNumber(t))l.value=t.toFixed(0),l.datatype.value=n||y;else if("i18n-datatype"===r&&"@direction"in e){const n="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+"_"+e["@direction"];l.datatype.value=n,l.value=t}else"@language"in e?(l.value=t,l.datatype.value=n||h,l.language=e["@language"]):(l.value=t,l.datatype.value=n||m)}else if(a.isList(e)){const a=j(e["@list"],t,n,o,r);l.termType=a.termType,l.value=a.value}else{const t=s.isObject(e)?e["@id"]:e;l.termType=t.startsWith("_:")?"BlankNode":"NamedNode",l.value=t}return"NamedNode"!==l.termType||x(l.value)?l:null}e.exports=b,b.toRDF=(e,t)=>{const n=new l.IdentifierIssuer("_:b"),r={"@default":{}};o(e,r,"@default",n);const a=[],i=Object.keys(r).sort();for(const o of i){let e;if("@default"===o)e={termType:"DefaultGraph",value:""};else{if(!x(o))continue;e=o.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},e.value=o}w(a,r[o],e,n,t)}return a}},"796c":function(e,t,n){"use strict";const{isKeyword:o}=n("d1e70"),r=n("c92f"),a=n("68fa"),i=n("89ae"),s=n("5950"),l={};e.exports=l,l.createMergedNodeMap=(e,t)=>{t=t||{};const n=t.issuer||new i.IdentifierIssuer("_:b"),o={"@default":{}};return l.createNodeMap(e,o,"@default",n),l.mergeNodeMaps(o)},l.createNodeMap=(e,t,n,c,d,u)=>{if(a.isArray(e)){for(const o of e)l.createNodeMap(o,t,n,c,void 0,u);return}if(!a.isObject(e))return void(u&&u.push(e));if(r.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=c.getId(t))}return void(u&&u.push(e))}if(u&&r.isList(e)){const o=[];return l.createNodeMap(e["@list"],t,n,c,d,o),void u.push({"@list":o})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&c.getId(e)}a.isUndefined(d)&&(d=r.isBlankNode(e)?c.getId(e["@id"]):e["@id"]),u&&u.push({"@id":d});const p=t[n],f=p[d]=p[d]||{};f["@id"]=d;const h=Object.keys(e).sort();for(let a of h){if("@id"===a)continue;if("@reverse"===a){const o={"@id":d},a=e["@reverse"];for(const e in a){const s=a[e];for(const a of s){let s=a["@id"];r.isBlankNode(a)&&(s=c.getId(s)),l.createNodeMap(a,t,n,c,s),i.addValue(p[s],e,o,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===a){d in t||(t[d]={}),l.createNodeMap(e[a],t,d,c);continue}if("@included"===a){l.createNodeMap(e[a],t,n,c);continue}if("@type"!==a&&o(a)){if("@index"===a&&a in f&&(e[a]!==f[a]||e[a]["@id"]!==f[a]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[a]=e[a];continue}const u=e[a];if(0===a.indexOf("_:")&&(a=c.getId(a)),0!==u.length)for(let e of u)if("@type"===a&&(e=0===e.indexOf("_:")?c.getId(e):e),r.isSubject(e)||r.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const o=r.isBlankNode(e)?c.getId(e["@id"]):e["@id"];i.addValue(f,a,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),l.createNodeMap(e,t,n,c,o)}else if(r.isValue(e))i.addValue(f,a,e,{propertyIsArray:!0,allowDuplicate:!1});else if(r.isList(e)){const o=[];l.createNodeMap(e["@list"],t,n,c,d,o),e={"@list":o},i.addValue(f,a,e,{propertyIsArray:!0,allowDuplicate:!1})}else l.createNodeMap(e,t,n,c,d),i.addValue(f,a,e,{propertyIsArray:!0,allowDuplicate:!1});else i.addValue(f,a,[],{propertyIsArray:!0})}},l.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const r of Object.keys(e[n]).sort()){const a=e[n][r];r in t||(t[r]={"@id":r});const s=t[r];for(const e of Object.keys(a).sort())if(o(e)&&"@type"!==e)s[e]=i.clone(a[e]);else for(const t of a[e])i.addValue(s,e,i.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},l.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const o of n){if("@default"===o)continue;const n=e[o];let a=t[o];a?"@graph"in a||(a["@graph"]=[]):t[o]=a={"@id":o,"@graph":[]};const i=a["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];r.isSubjectReference(t)||i.push(t)}}return t}},"7db0":function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").find,a=n("44d2"),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},8322:function(e,t,n){"use strict";e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},"89a1":function(e){e.exports=JSON.parse('{"id":"@id","type":"@type","vis":"https://visjs.github.io/vis-network/docs/network/","nodes":"vis:nodes","edges":"vis:edges","color":"vis:color","background":"vis:nodes#color/background","border":"vis:nodes#color/border","shape":"vis:nodes/shape","from":{"@id":"vis:edges#from","@type":"@id"},"to":{"@id":"vis:edges#to","@type":"@id"},"terms":"http://purl.org/dc/terms/","created":"terms:created","creator":"terms:creator","rdfs":"http://www.w3.org/2000/01/rdf-schema#","label":"rdfs:label","motifs":"http://purl.org/net/wf-motifs#","ipgs":"https://scenaristeur.github.io/ipgs#","@base":""}')},"89ae":function(e,t,n){"use strict";const o=n("c92f"),r=n("68fa"),a=n("30ba").IdentifierIssuer,i=n("5950"),s=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,l=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,d={headers:{accept:"application/ld+json, application/json"}},u={};function p(e,t){if(r.isArray(t))for(let n=0;n<t.length;++n)t[n]=p(e,t[n]);else if(o.isList(t))t["@list"]=p(e,t["@list"]);else if(r.isObject(t)){o.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const n=Object.keys(t).sort();for(let o=0;o<n.length;++o){const r=n[o];"@id"!==r&&(t[r]=p(e,t[r]))}}return t}e.exports=u,u.IdentifierIssuer=a,u.clone=function(e){if(e&&"object"===typeof e){let t;if(r.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=u.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,o]of e)t.set(n,u.clone(o))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(u.clone(n))}else if(r.isObject(e)){t={};for(const n in e)t[n]=u.clone(e[n])}else t=e.toString();return t}return e},u.asArray=function(e){return Array.isArray(e)?e:[e]},u.buildHeaders=(e={})=>{const t=Object.keys(e).some(e=>"accept"===e.toLowerCase());if(t)throw new RangeError('Accept header may not be specified; only "'+d.headers.accept+'" is supported.');return Object.assign({Accept:d.headers.accept},e)},u.parseLinkHeader=e=>{const t={},n=e.match(s);for(let o=0;o<n.length;++o){let e=n[o].match(l);if(!e)continue;const r={target:e[1]},a=e[2];while(e=c.exec(a))r[e[1]]=void 0===e[2]?e[3]:e[2];const i=r["rel"]||"";Array.isArray(t[i])?t[i].push(r):t.hasOwnProperty(i)?t[i]=[t[i],r]:t[i]=r}return t},u.validateTypeValue=(e,t)=>{if(!r.isString(e)&&(!r.isArray(e)||!e.every(e=>r.isString(e)))){if(t&&r.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&u.asArray(e["@default"]).every(e=>r.isString(e)))return}throw new i('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},u.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!r.isArray(n)||n.length>0}return!1},u.hasValue=(e,t,n)=>{if(u.hasProperty(e,t)){let a=e[t];const i=o.isList(a);if(r.isArray(a)||i){i&&(a=a["@list"]);for(let e=0;e<a.length;++e)if(u.compareValues(n,a[e]))return!0}else if(!r.isArray(n))return u.compareValues(n,a)}return!1},u.addValue=(e,t,n,o)=>{if(o=o||{},"propertyIsArray"in o||(o.propertyIsArray=!1),"valueIsArray"in o||(o.valueIsArray=!1),"allowDuplicate"in o||(o.allowDuplicate=!0),"prependValue"in o||(o.prependValue=!1),o.valueIsArray)e[t]=n;else if(r.isArray(n)){0===n.length&&o.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),o.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let r=0;r<n.length;++r)u.addValue(e,t,n[r],o)}else if(e.hasOwnProperty(t)){const a=!o.allowDuplicate&&u.hasValue(e,t,n);r.isArray(e[t])||a&&!o.propertyIsArray||(e[t]=[e[t]]),a||(o.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=o.propertyIsArray?[n]:n},u.getValues=(e,t)=>[].concat(e[t]||[]),u.removeProperty=(e,t)=>{delete e[t]},u.removeValue=(e,t,n,o)=>{o=o||{},"propertyIsArray"in o||(o.propertyIsArray=!1);const r=u.getValues(e,t).filter(e=>!u.compareValues(e,n));0===r.length?u.removeProperty(e,t):1!==r.length||o.propertyIsArray?e[t]=r:e[t]=r[0]},u.relabelBlankNodes=(e,t)=>{t=t||{};const n=t.issuer||new a("_:b");return p(n,e)},u.compareValues=(e,t)=>e===t||(!(!o.isValue(e)||!o.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(r.isObject(e)&&"@id"in e&&r.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]),u.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},"8acc":function(e,t,n){"use strict";e.exports=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:o}=this;return new e(t,new Map(n),o)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},9093:function(e,t,n){"use strict";const o=n("1f25"),r=10;e.exports=class{constructor({document:e}){this.document=e,this.cache=new o({max:r})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},a757:function(e,t,n){"use strict";const o=n("4284");e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,o=this.blankNodeInfo.get(e).quads;for(const r of o){let o,a;if("BlankNode"===r.subject.termType&&r.subject.value!==e)a=r.subject.value,o="p";else{if("BlankNode"!==r.object.termType||r.object.value===e)continue;a=r.object.value,o="r"}const i=this.hashRelatedBlankNode(a,r,t,o),s=n.get(i);s?s.push(a):n.set(i,[a])}return n}}},ae29:function(e,t,n){"use strict";const o=n("8acc"),r=n("5a76"),a=n("c79e"),i=n("65e1");function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new o("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(e){this.quads=e;for(const o of e)this._addBlankNodeQuadInfo({quad:o,component:o.subject}),this._addBlankNodeQuadInfo({quad:o,component:o.object}),this._addBlankNodeQuadInfo({quad:o,component:o.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];let r=0;for(const o of n)++r%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:o,hashToBlankNodes:t});const a=[...t.keys()].sort(),l=[];for(const o of a){const e=t.get(o);if(e.length>1){l.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const i of l){const e=[];for(const t of i){if(this.canonicalIssuer.hasId(t))continue;const n=new o("_:b");n.getId(t);const r=await this.hashNDegreeQuads(t,n);e.push(r)}e.sort(s);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const c=[];for(const o of this.quads){const e={...o};e.subject=this._useCanonicalId({component:e.subject}),e.object=this._useCanonicalId({component:e.object}),e.graph=this._useCanonicalId({component:e.graph}),c.push(i.serializeQuad(e))}return c.sort(),c.join("")}async hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),o=n.quads;for(const r of o){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(i.serializeQuad(n))}t.sort();const a=new r(this.hashAlgorithm);for(const r of t)a.update(r);return n.hash=await a.digest(),n.hash}async hashRelatedBlankNode(e,t,n,o){let a;a=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const i=new r(this.hashAlgorithm);return i.update(o),"g"!==o&&i.update(this.getRelatedPredicate(t)),i.update(a),i.digest()}async hashNDegreeQuads(e,t){const n=new r(this.hashAlgorithm),o=await this.createHashToRelated(e,t),i=[...o.keys()].sort();for(const r of i){n.update(r);let e,i="";const s=new a(o.get(r));let l=0;while(s.hasNext()){const n=s.next();++l%3===0&&await this._yield();let o=t.clone(),r="";const a=[];let c=!1;for(const e of n)if(this.canonicalIssuer.hasId(e)?r+=this.canonicalIssuer.getId(e):(o.hasId(e)||a.push(e),r+=o.getId(e)),0!==i.length&&r>i){c=!0;break}if(!c){for(const e of a){const t=await this.hashNDegreeQuads(e,o);if(r+=o.getId(e),r+=`<${t.hash}>`,o=t.issuer,0!==i.length&&r>i){c=!0;break}}c||(0===i.length||r<i)&&(i=r,e=o)}}n.update(i),t=e}return{hash:await n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const n=new Map,o=this.blankNodeInfo.get(e).quads;let r=0;for(const a of o)++r%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:e,issuer:t,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=await this.hashFirstDegreeQuads(e),o=t.get(n);o?o.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,o=this.blankNodeInfo.get(n);o?o.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:n,id:o,issuer:r,hashToRelated:a}){if("BlankNode"!==t.termType||t.value===o)return;const i=t.value,s=await this.hashRelatedBlankNode(i,e,r,n),l=a.get(s);l?l.push(i):a.set(s,[i])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise(e=>setImmediate(e))}}},c79e:function(e,t,n){"use strict";e.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let o=null,r=0;const a=e.length;for(let i=0;i<a;++i){const n=e[i],s=t.get(n);(null===o||n>o)&&(s&&i>0&&n>e[i-1]||!s&&i<a-1&&n>e[i+1])&&(o=n,r=i)}if(null===o)this.done=!0;else{const n=t.get(o)?r-1:r+1;e[r]=e[n],e[n]=o;for(const r of e)r>o&&t.set(r,!t.get(r))}return n}}},c92f:function(e,t,n){"use strict";const o=n("68fa"),r={};e.exports=r,r.isSubject=e=>{if(o.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){const t=Object.keys(e).length;return t>1||!("@id"in e)}return!1},r.isSubjectReference=e=>o.isObject(e)&&1===Object.keys(e).length&&"@id"in e,r.isValue=e=>o.isObject(e)&&"@value"in e,r.isList=e=>o.isObject(e)&&"@list"in e,r.isGraph=e=>o.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter(e=>"@id"!==e&&"@index"!==e).length,r.isSimpleGraph=e=>r.isGraph(e)&&!("@id"in e),r.isBlankNode=e=>!!o.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))},d1e70:function(e,t,n){"use strict";const o=n("89ae"),r=n("5950"),{isArray:a,isObject:i,isString:s,isUndefined:l}=n("68fa"),{isAbsolute:c,isRelative:d,prependBase:u}=n("ddd7"),{asArray:p,compareShortestLeast:f}=n("89ae"),h=new Map,v=1e4,g=/^@[a-zA-Z]+$/,y={};function m(e,t,n,o,r,a){if(null===t||!s(t)||y.isKeyword(t))return t;if(t.match(g))return null;if(o&&o.hasOwnProperty(t)&&!0!==r.get(t)&&y.createTermDefinition({activeCtx:e,localCtx:o,term:t,defined:r,options:a}),n=n||{},n.vocab){const n=e.mappings.get(t);if(null===n)return null;if(i(n)&&"@id"in n)return n["@id"]}const l=t.indexOf(":");if(l>0){const n=t.substr(0,l),i=t.substr(l+1);if("_"===n||0===i.indexOf("//"))return t;o&&o.hasOwnProperty(n)&&y.createTermDefinition({activeCtx:e,localCtx:o,term:n,defined:r,options:a});const s=e.mappings.get(n);if(s&&s._prefix)return s["@id"]+i;if(c(t))return t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;if(n.base&&"@base"in e){if(e["@base"])return u(u(a.base,e["@base"]),t)}else if(n.base)return u(a.base,t);return t}function x(e,t){if(!e||"object"!==typeof e||!t||"object"!==typeof t)return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!x(e[n],t[n]))return!1;return!0}const o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(const a in e){let n=e[a],o=t[a];if("@container"===a&&Array.isArray(n)&&Array.isArray(o)&&(n=n.slice().sort(),o=o.slice().sort()),!x(n,o))return!1}return!0}e.exports=y,y.process=async({activeCtx:e,localCtx:t,options:n,propagate:l=!0,overrideProtected:f=!1,cycles:h=new Set})=>{i(t)&&"@context"in t&&a(t["@context"])&&(t=t["@context"]);const v=p(t);if(0===v.length)return e;const g=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});i(g[0].document)&&"boolean"===typeof g[0].document["@propagate"]&&(l=g[0].document["@propagate"]);let x=e;l||x.previousContext||(x=x.clone(),x.previousContext=e);for(const a of g){let{document:l}=a;if(e=x,null===l){if(!f&&0!==Object.keys(e.protected).length){const i=n&&n.protectedMode||"error";if("error"===i)throw new r("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===i){console.warn("WARNING: invalid context nullification");const t=a.getProcessed(e);if(t){x=e=t;continue}const r=e;x=e=y.getInitialContext(n).clone();for(const[n,a]of Object.entries(r.protected))a&&(e.mappings[n]=o.clone(r.mappings[n]));e.protected=o.clone(r.protected),a.setProcessed(r,x);continue}throw new r("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:i})}x=e=y.getInitialContext(n).clone();continue}const p=a.getProcessed(e);if(p){x=e=p;continue}if(i(l)&&"@context"in l&&(l=l["@context"]),!i(l))throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l});x=x.clone();const v=new Map;if("@version"in l){if(1.1!==l["@version"])throw new r("Unsupported JSON-LD version: "+l["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:l});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new r("@version: "+l["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:l});x.processingMode="json-ld-1.1",x["@version"]=l["@version"],v.set("@version",!0)}if(x.processingMode=x.processingMode||e.processingMode,"@base"in l){let e=l["@base"];if(null===e||c(e));else{if(!d(e))throw new r('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l});e=u(x["@base"],e)}x["@base"]=e,v.set("@base",!0)}if("@vocab"in l){const e=l["@vocab"];if(null===e)delete x["@vocab"];else{if(!s(e))throw new r('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});if(!c(e)&&y.processingMode(x,1))throw new r('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});x["@vocab"]=m(x,e,{vocab:!0,base:!0},void 0,void 0,n)}v.set("@vocab",!0)}if("@language"in l){const e=l["@language"];if(null===e)delete x["@language"];else{if(!s(e))throw new r('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:l});x["@language"]=e.toLowerCase()}v.set("@language",!0)}if("@direction"in l){const t=l["@direction"];if("json-ld-1.0"===e.processingMode)throw new r("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:l});if(null===t)delete x["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new r('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:l});x["@direction"]=t}v.set("@direction",!0)}if("@propagate"in l){const n=l["@propagate"];if("json-ld-1.0"===e.processingMode)throw new r("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if("boolean"!==typeof n)throw new r("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});v.set("@propagate",!0)}if("@import"in l){const o=l["@import"];if("json-ld-1.0"===e.processingMode)throw new r("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if(!s(o))throw new r("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const a=await n.contextResolver.resolve({activeCtx:e,context:o,documentLoader:n.documentLoader,base:n.base});if(1!==a.length)throw new r("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const i=a[0].getProcessed(e);if(i)l=i;else{const n=a[0].document;if("@import"in n)throw new r("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)l.hasOwnProperty(e)||(l[e]=n[e]);a[0].setProcessed(e,l)}v.set("@import",!0)}v.set("@protected",l["@protected"]||!1);for(const e in l)if(y.createTermDefinition({activeCtx:x,localCtx:l,term:e,defined:v,options:n,overrideProtected:f}),i(l[e])&&"@context"in l[e]){const t=l[e]["@context"];let o=!0;if(s(t)){const e=u(n.base,t);h.has(e)?o=!1:h.add(e)}if(o)try{await y.process({activeCtx:x.clone(),localCtx:l[e]["@context"],overrideProtected:!0,options:n,cycles:h})}catch(b){throw new r("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:l[e]["@context"],term:e})}}a.setProcessed(e,x)}return x},y.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:o,options:l,overrideProtected:d=!1})=>{if(o.has(n)){if(o.get(n))return;throw new r("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let u;if(o.set(n,!1),t.hasOwnProperty(n)&&(u=t[n]),"@type"===n&&i(u)&&"@set"===(u["@container"]||"@set")&&y.processingMode(e,1.1)){const e=["@container","@id","@protected"],o=Object.keys(u);if(0===o.length||o.some(t=>!e.includes(t)))throw new r("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(y.isKeyword(n))throw new r("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(g))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});if(""===n)throw new r("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const p=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let f=!1;if((s(u)||null===u)&&(f=!0,u={"@id":u}),!i(u))throw new r("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const h={};e.mappings.set(n,h),h.reverse=!1;const v=["@container","@id","@language","@reverse","@type"];y.processingMode(e,1.1)&&v.push("@context","@direction","@index","@nest","@prefix","@protected");for(const a in u)if(!v.includes(a))throw new r("Invalid JSON-LD syntax; a term definition must not contain "+a,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const b=n.indexOf(":");if(h._termHasColon=b>0,"@reverse"in u){if("@id"in u)throw new r("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in u)throw new r("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const a=u["@reverse"];if(!s(a))throw new r("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!y.isKeyword(a)&&a.match(g))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:a}),void(p?e.mappings.set(n,p):e.mappings.delete(n));const i=m(e,a,{vocab:!0,base:!1},t,o,l);if(!c(i))throw new r("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});h["@id"]=i,h.reverse=!0}else if("@id"in u){let a=u["@id"];if(a&&!s(a))throw new r("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===a)h["@id"]=null;else{if(!y.isKeyword(a)&&a.match(g))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:a}),void(p?e.mappings.set(n,p):e.mappings.delete(n));if(a!==n){if(a=m(e,a,{vocab:!0,base:!1},t,o,l),!c(a)&&!y.isKeyword(a))throw new r("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){const i=new Map(o).set(n,!0),s=m(e,n,{vocab:!0,base:!1},t,i,l);if(s!==a)throw new r("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}h["@id"]=a,h._prefix=f&&!h._termHasColon&&a.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in h))if(h._termHasColon){const r=n.substr(0,b);if(t.hasOwnProperty(r)&&y.createTermDefinition({activeCtx:e,localCtx:t,term:r,defined:o,options:l}),e.mappings.has(r)){const t=n.substr(b+1);h["@id"]=e.mappings.get(r)["@id"]+t}else h["@id"]=n}else if("@type"===n)h["@id"]=n;else{if(!("@vocab"in e))throw new r("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});h["@id"]=e["@vocab"]+n}if((!0===u["@protected"]||!0===o.get("@protected")&&!1!==u["@protected"])&&(e.protected[n]=!0,h.protected=!0),o.set(n,!0),"@type"in u){let n=u["@type"];if(!s(n))throw new r("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(y.processingMode(e,1))throw new r(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=m(e,n,{vocab:!0,base:!1},t,o,l),!c(n))throw new r("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new r("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}h["@type"]=n}if("@container"in u){const n=s(u["@container"])?[u["@container"]]:u["@container"]||[],o=["@list","@set","@index","@language"];let i=!0;const l=n.includes("@set");if(y.processingMode(e,1.1)){if(o.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new r("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new r("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=n.length<=(l?2:1);if(n.includes("@type")&&(h["@type"]=h["@type"]||"@id",!["@id","@vocab"].includes(h["@type"])))throw new r("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else i&=!a(u["@container"]),i&=n.length<=1;if(i&=n.every(e=>o.includes(e)),i&=!(l&&n.includes("@list")),!i)throw new r("Invalid JSON-LD syntax; @context @container value must be one of the following: "+o.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(h.reverse&&!n.every(e=>["@index","@set"].includes(e)))throw new r("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});h["@container"]=n}if("@index"in u){if(!("@container"in u)||!h["@container"].includes("@index"))throw new r(`Invalid JSON-LD syntax; @index without @index in @container: "${u["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!s(u["@index"])||0===u["@index"].indexOf("@"))throw new r(`Invalid JSON-LD syntax; @index must expand to an IRI: "${u["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});h["@index"]=u["@index"]}if("@context"in u&&(h["@context"]=u["@context"]),"@language"in u&&!("@type"in u)){let e=u["@language"];if(null!==e&&!s(e))throw new r("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),h["@language"]=e}if("@prefix"in u){if(n.match(/:|\//))throw new r("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(y.isKeyword(h["@id"]))throw new r("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!==typeof u["@prefix"])throw new r("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});h._prefix=!0===u["@prefix"]}if("@direction"in u){const e=u["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new r('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});h["@direction"]=e}if("@nest"in u){const e=u["@nest"];if(!s(e)||"@nest"!==e&&0===e.indexOf("@"))throw new r("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});h["@nest"]=e}
// disallow aliasing @context and @preserve
const w=h["@id"];if("@context"===w||"@preserve"===w)throw new r("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(p&&p.protected&&!d&&(e.protected[n]=!0,h.protected=!0,!x(p,h))){const e=l&&l.protectedMode||"error";if("error"===e)throw new r("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:n});throw new r("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:n,protectedMode:e})}},y.expandIri=(e,t,n,o)=>m(e,t,n,void 0,void 0,o),y.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=h.get(t);if(n)return n;const r={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:a,clone:l,revertToPreviousContext:c,protected:{}};return h.size===v&&h.clear(),h.set(t,r),r;function a(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},o={},r=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],l=e.mappings,c=[...l.keys()].sort(f);for(const i of c){const e=l.get(i);if(null===e)continue;let c=e["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===e["@id"])continue;const d=p(e["@id"]);for(const l of d){let d=t[l];const u=y.isKeyword(l);if(d)u||e._termHasColon||o[l].push(i);else if(t[l]=d={},!u&&!e._termHasColon){o[l]=[i];const e={iri:l,terms:o[l]};l[0]in n?n[l[0]].push(e):n[l[0]]=[e]}if(d[c]||(d[c]={"@language":{},"@type":{},"@any":{}}),d=d[c],s(i,d["@any"],"@none"),e.reverse)s(i,d["@type"],"@reverse");else if("@none"===e["@type"])s(i,d["@any"],"@none"),s(i,d["@language"],"@none"),s(i,d["@type"],"@none");else if("@type"in e)s(i,d["@type"],e["@type"]);else if("@language"in e&&"@direction"in e){const t=e["@language"],n=e["@direction"];s(i,d["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?"_"+n:"@null")}else"@language"in e?s(i,d["@language"],(e["@language"]||"@null").toLowerCase()):"@direction"in e?e["@direction"]?s(i,d["@language"],"_"+e["@direction"]):s(i,d["@language"],"@none"):a?(s(i,d["@language"],"_"+a),s(i,d["@language"],"@none"),s(i,d["@type"],"@none")):(s(i,d["@language"],r),s(i,d["@language"],"@none"),s(i,d["@type"],"@none"))}}for(const s in n)i(n,s,1);return t}function i(e,t,n){const o=e[t],r=e[t]={};let a,s;for(const i of o)a=i.iri,s=n>=a.length?"":a[n],s in r?r[s].push(i):r[s]=[i];for(const l in r)""!==l&&i(r,l,n+1)}function s(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}function l(){const e={};return e.mappings=o.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=o.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}function c(){return this.previousContext?this.previousContext.clone():this}},y.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const o=e.mappings.get(t);if(l(n))return o;if(o.hasOwnProperty(n))return o[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},y.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,y.isKeyword=e=>{if(!s(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},ddd7:function(e,t,n){"use strict";const o=n("68fa"),r={};e.exports=r,r.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},r.parse=(e,t)=>{const n={},o=r.parsers[t||"full"],a=o.regex.exec(e);let i=o.keys.length;while(i--)n[o.keys[i]]=void 0===a[i]?null:a[i];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=r.removeDotSegments(n.path),n},r.prependBase=(e,t)=>{if(null===e)return t;if(r.isAbsolute(t))return t;e&&!o.isString(e)||(e=r.parse(e||""));const n=r.parse(t),a={protocol:e.protocol||""};if(null!==n.authority)a.authority=n.authority,a.path=n.path,a.query=n.query;else if(a.authority=e.authority,""===n.path)a.path=e.path,null!==n.query?a.query=n.query:a.query=e.query;else{if(0===n.path.indexOf("/"))a.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,a.path=t}a.query=n.query}""!==n.path&&(a.path=r.removeDotSegments(a.path));let i=a.protocol;return null!==a.authority&&(i+="//"+a.authority),i+=a.path,null!==a.query&&(i+="?"+a.query),null!==n.fragment&&(i+="#"+n.fragment),""===i&&(i="./"),i},r.removeBase=(e,t)=>{if(null===e)return t;e&&!o.isString(e)||(e=r.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const a=r.parse(t.substr(n.length)),i=e.normalizedPath.split("/"),s=a.normalizedPath.split("/"),l=a.fragment||a.query?0:1;while(i.length>0&&s.length>l){if(i[0]!==s[0])break;i.shift(),s.shift()}let c="";if(i.length>0){i.pop();for(let e=0;e<i.length;++e)c+="../"}return c+=s.join("/"),null!==a.query&&(c+="?"+a.query),null!==a.fragment&&(c+="#"+a.fragment),""===c&&(c="./"),c},r.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];while(t.length>0){const e=t.shift(),o=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),o&&n.push("")):o&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const a=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;r.isAbsolute=e=>o.isString(e)&&a.test(e),r.isRelative=e=>o.isString(e)},e6ed:function(e,t,n){"use strict";const{isKeyword:o}=n("d1e70"),r=n("c92f"),a=n("68fa"),i=n("89ae"),s=n("ddd7"),l=n("5950"),{createNodeMap:c,mergeNodeMapGraphs:d}=n("796c"),u={};function p(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function f(e,t,n){for(let o=n.length-1;o>=0;--o){const r=n[o];if(r.graph===t&&r.subject["@id"]===e["@id"])return!0}return!1}function h(e,t,n){const o="@"+n;let r=o in e?e[o][0]:t[n];if("embed"===n)if(!0===r)r="@once";else if(!1===r)r="@never";else if("@always"!==r&&"@never"!==r&&"@link"!==r&&"@first"!==r&&"@last"!==r&&"@once"!==r)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return r}function v(e){if(!a.isArray(e)||1!==e.length||!a.isObject(e[0]))throw new l("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of i.asArray(e[0]["@id"]))if(!a.isObject(t)&&!s.isAbsolute(t)||a.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of i.asArray(e[0]["@type"]))if(!a.isObject(t)&&!s.isAbsolute(t)||a.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function g(e,t,n,o){const r={};for(const a of t){const t=e.graphMap[e.graph][a];y(e,t,n,o)&&(r[a]=t)}return r}function y(e,t,n,s){let l=!0,c=!1;for(const d in n){let u=!1;const p=i.getValues(t,d),f=0===i.getValues(n,d).length;if("@id"===d){if(a.isEmptyObject(n["@id"][0]||{})?u=!0:n["@id"].length>=0&&(u=n["@id"].includes(p[0])),!s.requireAll)return u}else if("@type"===d){if(l=!1,f){if(p.length>0)return!1;u=!0}else if(1===n["@type"].length&&a.isEmptyObject(n["@type"][0]))u=p.length>0;else for(const e of n["@type"])u=!(!a.isObject(e)||!("@default"in e))||(u||p.some(t=>t===e));if(!s.requireAll)return u}else{if(o(d))continue;{const t=i.getValues(n,d)[0];let o=!1;if(t&&(v([t]),o="@default"in t),l=!1,0===p.length&&o)continue;if(p.length>0&&f)return!1;if(void 0===t){if(p.length>0)return!1;u=!0}else if(r.isList(t)){const n=t["@list"][0];if(r.isList(p[0])){const t=p[0]["@list"];r.isValue(n)?u=t.some(e=>j(n,e)):(r.isSubject(n)||r.isSubjectReference(n))&&(u=t.some(t=>w(e,n,t,s)))}}else u=r.isValue(t)?p.some(e=>j(t,e)):r.isSubjectReference(t)?p.some(n=>w(e,t,n,s)):!!a.isObject(t)&&p.length>0}}if(!u&&s.requireAll)return!1;c=c||u}return l||c}function m(e,t){const n=e.uniqueEmbeds[e.graph],o=n[t],r=o.parent,s=o.property,l={"@id":t};if(a.isArray(r)){for(let a=0;a<r.length;++a)if(i.compareValues(r[a],l)){r[a]=l;break}}else{const e=a.isArray(r[s]);i.removeValue(r,s,l,{propertyIsArray:e}),i.addValue(r,s,l,{propertyIsArray:e})}const c=e=>{const t=Object.keys(n);for(const o of t)o in n&&a.isObject(n[o].parent)&&n[o].parent["@id"]===e&&(delete n[o],c(o))};c(t)}
/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function x(e,t){if(a.isArray(e))return e.map(e=>x(e,t));if(a.isObject(e)){
// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(r.isValue(e))return e;if(r.isList(e))return e["@list"]=x(e["@list"],t),e;if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const o=t.link[n].indexOf(e);if(-1!==o)return t.link[n][o];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)"@id"===n&&t.bnodesToClear.includes(e[n])?delete e["@id"]:e[n]=x(e[n],t)}return e}function b(e,t,n){a.isObject(e)?i.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function w(e,t,n,o){if(!("@id"in n))return!1;const r=e.subjects[n["@id"]];return r&&y(e,r,t,o)}function j(e,t){const n=t["@value"],o=t["@type"],r=t["@language"],i=e["@value"]?a.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?a.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?a.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===i.length&&0===s.length&&0===l.length||!(!i.includes(n)&&!a.isEmptyObject(i[0]))&&(!!(!o&&0===s.length||s.includes(o)||o&&a.isEmptyObject(s[0]))&&!!(!r&&0===l.length||l.includes(r)||r&&a.isEmptyObject(l[0])))}e.exports=u,u.frameMergedOrDefault=(e,t,n)=>{const o={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},r=new i.IdentifierIssuer("_:b");c(e,o.graphMap,"@default",r),n.merged&&(o.graphMap["@merged"]=d(o.graphMap),o.graph="@merged"),o.subjects=o.graphMap[o.graph];const a=[];return u.frame(o,Object.keys(o.subjects).sort(),t,a),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(o.bnodeMap).filter(e=>1===o.bnodeMap[e].length)),
// remove @preserve from results
n.link={},x(a,n)},u.frame=(e,t,n,s,c=null)=>{v(n),n=n[0];const d=e.options,y={embed:h(n,d,"embed"),explicit:h(n,d,"explicit"),requireAll:h(n,d,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const x=e.link[e.graph],w=g(e,t,n,y),I=Object.keys(w).sort();for(const v of I){const g=w[v];if(null===c?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===y.embed&&v in x){b(s,c,x[v]);continue}const I={"@id":v};if(0===v.indexOf("_:")&&i.addValue(e.bnodeMap,v,I,{propertyIsArray:!0}),x[v]=I,("@first"===y.embed||"@last"===y.embed)&&e.is11)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(v))if(!e.embedded||"@never"!==y.embed&&!f(g,e.graph,e.subjectStack))if(!e.embedded||"@first"!=y.embed&&"@once"!=y.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(v)){if("@last"===y.embed&&v in e.uniqueEmbeds[e.graph]&&m(e,v),e.uniqueEmbeds[e.graph][v]={parent:s,property:c},e.subjectStack.push({subject:g,graph:e.graph}),v in e.graphMap){let t=!1,o=null;"@graph"in n?(o=n["@graph"][0],t=!("@merged"===v||"@default"===v),a.isObject(o)||(o={})):(t="@merged"!==e.graph,o={}),t&&u.frame({...e,graph:v,embedded:!1},Object.keys(e.graphMap[v]).sort(),[o],I,"@graph")}"@included"in n&&u.frame({...e,embedded:!1},t,n["@included"],I,"@included");for(const t of Object.keys(g).sort())if(o(t)){if(I[t]=i.clone(g[t]),"@type"===t)for(const n of g["@type"])0===n.indexOf("_:")&&i.addValue(e.bnodeMap,n,I,{propertyIsArray:!0})}else if(!y.explicit||t in n)for(const o of g[t]){const a=t in n?n[t]:p(y);if(r.isList(o)){const a=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:p(y),s={"@list":[]};b(I,t,s);const l=o["@list"];for(const t of l)r.isSubjectReference(t)?u.frame({...e,embedded:!0},[t["@id"]],a,s,"@list"):b(s,"@list",i.clone(t))}else r.isSubjectReference(o)?u.frame({...e,embedded:!0},[o["@id"]],a,I,t):j(a[0],o)&&b(I,t,i.clone(o))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!a.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(o(e))continue;const t=n[e][0]||{},r=h(t,d,"omitDefault");if(!r&&!(e in I)){let n="@null";"@default"in t&&(n=i.clone(t["@default"])),a.isArray(n)||(n=[n]),I[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const o=n["@reverse"][t];for(const n of Object.keys(e.subjects)){const r=i.getValues(e.subjects[n],t);r.some(e=>e["@id"]===v)&&(I["@reverse"]=I["@reverse"]||{},i.addValue(I["@reverse"],t,[],{propertyIsArray:!0}),u.frame({...e,embedded:!0},[n],o,I["@reverse"][t],c))}}b(s,c,I),e.subjectStack.pop()}else b(s,c,I);else b(s,c,I)}},u.cleanupNull=(e,t)=>{if(a.isArray(e)){const n=e.map(e=>u.cleanupNull(e,t));return n.filter(e=>e)}if("@null"===e)return null;if(a.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const o=t.link[n].indexOf(e);if(-1!==o)return t.link[n][o];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=u.cleanupNull(e[n],t)}return e}},f9a0:function(e,t,n){"use strict";const{RDF_LANGSTRING:o,RDF_PLAIN_LITERAL:r,RDF_OBJECT:a,RDF_XML_LITERAL:i,XSD_STRING:s}=n("feb1");let l;function c(){return"undefined"===typeof XMLSerializer?n(2).XMLSerializer:XMLSerializer}l="undefined"!==typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},e.exports=class{parse(e){const t={"@default":[]},n=e.getSubjects();for(let d=0;d<n.length;++d){const u=n[d];if(null===u)continue;const p=e.getSubjectTriples(u);if(null===p)continue;const f=p.predicates;for(const e in f){const n=f[e].objects;for(let d=0;d<n.length;++d){const p=n[d],f={};0===u.indexOf("_:")?f.subject={type:"blank node",value:u}:f.subject={type:"IRI",value:u},0===e.indexOf("_:")?f.predicate={type:"blank node",value:e}:f.predicate={type:"IRI",value:e};let h=p.value;if(p.type===i){const e=c(),t=new e;h="";for(let n=0;n<p.value.length;n++)p.value[n].nodeType===l.ELEMENT_NODE?h+=t.serializeToString(p.value[n]):p.value[n].nodeType===l.TEXT_NODE&&(h+=p.value[n].nodeValue)}f.object={},p.type===a?0===p.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",p.type===r?p.language?(f.object.datatype=o,f.object.language=p.language):f.object.datatype=s:f.object.datatype=p.type),f.object.value=h,t["@default"].push(f)}}}return t}}},fdb5:function(e,t,n){"use strict";const{parseLinkHeader:o,buildHeaders:r}=n("89ae"),{LINK_HEADER_CONTEXT:a}=n("feb1"),i=n("5950"),s=n("40ce"),{prependBase:l}=n("ddd7");function c(e,t){return new Promise((n,o)=>{e(t,(e,t,r)=>{e?o(e):n({res:t,body:r})})})}e.exports=({secure:e,strictSSL:t=!0,maxRedirects:d=-1,request:u,headers:p={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{p=r(p),u=u||n(3);const f=n(4),h=new s;return h.wrapLoader((function(e){return v(e,[])}));async function v(n,r){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))throw new i('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n});if(e&&0!==n.indexOf("https"))throw new i('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n});let s,h=null;if(null!==h)return h;let g=null;try{s=await c(u,{url:n,headers:p,strictSSL:t,followRedirect:!1})}catch(b){throw new i("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:b})}const{res:y,body:m}=s;h={contextUrl:null,documentUrl:n,document:m||null};const x=f.STATUS_CODES[y.statusCode];if(y.statusCode>=400)throw new i(`URL "${n}" could not be dereferenced: ${x}`,"jsonld.InvalidUrl",{code:"loading document failed",url:n,httpStatusCode:y.statusCode});if(y.headers.link&&"application/ld+json"!==y.headers["content-type"]){const e=o(y.headers.link),t=e[a];if(Array.isArray(t))throw new i("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n});t&&(h.contextUrl=t.target),g=e["alternate"],g&&"application/ld+json"==g.type&&!(y.headers["content-type"]||"").match(/^application\/(\w*\+)?json$/)&&(y.headers.location=l(n,g.target))}if((g||y.statusCode>=300&&y.statusCode<400)&&y.headers.location){if(r.length===d)throw new i("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:n,httpStatusCode:y.statusCode,redirects:r});if(-1!==r.indexOf(n))throw new i("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:n,httpStatusCode:y.statusCode,redirects:r});return r.push(n),v(y.headers.location,r)}return r.push(n),h}}},feb1:function(e,t,n){"use strict";const o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:o,RDF_LIST:o+"List",RDF_FIRST:o+"first",RDF_REST:o+"rest",RDF_NIL:o+"nil",RDF_TYPE:o+"type",RDF_PLAIN_LITERAL:o+"PlainLiteral",RDF_XML_LITERAL:o+"XMLLiteral",RDF_JSON_LITERAL:o+"JSON",RDF_OBJECT:o+"object",RDF_LANGSTRING:o+"langString",XSD:r,XSD_BOOLEAN:r+"boolean",XSD_DOUBLE:r+"double",XSD_INTEGER:r+"integer",XSD_STRING:r+"string"}}}]);
//# sourceMappingURL=editor.4960c0a7.js.map