{"version":3,"sources":["webpack:///./src/components/network/ExportModal.vue?afdb","webpack:///./src/mixins1/networkUtilMixin.js","webpack:///src/components/network/ExportModal.vue","webpack:///./src/components/network/ExportModal.vue?c3af","webpack:///./src/components/network/ExportModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","content","enableBasicAutocompletion","enableSnippets","enableLiveAutocompletion","tabSize","staticClass","scopedSlots","_u","key","fn","_v","_s","format","proxy","on","$event","onFormatChange","downloadFile","save","IpfsAdd","cid","staticRenderFns","fc","FC","auth","methods","arraysEqual","a1","a2","undefined","length","every","o","idx","objectsEqual","o1","o2","Object","keys","p","loadFRAMED","url","readFile","headers","file","jsonFile","JSON","parse","console","log","Array","isArray","parsePossibleJsonld","parseFolder","readFolder","folder","frame","nodes","edges","jsonld","framed","compacted","cont","ldp","load","sockets","includes","push","websocket","Websocket","documentLoaderType","doc","err","alert","json","document","identiques","network","visContext","type","pairToVis","items","map","obj","label","id","info","nodeFromLabel","trim","split","join","color","background","border","shape","edgeFromLabel","data","from","to","jsonToJsonLd","ld","assign","jsonToJsonLd1","forEach","n","n_clone","e","e_clone","jsonToTtl","output","listeInfos","listeComplementaire","i","edge","sujet","propriete","replace","objet","nodeSubj","find","x","nodeObj","sujetLabel","objetLabel","error","sujetWithPrefix","validRdf","proprieteWithPrefix","objetWithPrefix","indexOf","typedeProp","indiceTypeDeProp","toLowerCase","uniq_fast","sort","k","l","a","seen","out","len","j","item","string","valid","contenu","contentType","fileNameToSaveAs","filename","prompt","textFileAsBlob","Blob","downloadLink","createElement","download","innerHTML","navigator","userAgent","href","window","URL","createObjectURL","target","style","display","body","appendChild","event","createEvent","initMouseEvent","dispatchEvent","setTimeout","removeChild","revokeObjectURL","name","mixins","networkUtilMixin","components","created","editorContent","$store","state","ipgs","mounted","getIpfsNodeInfo","fakeFunctionToNOTBELINTED","commit","$bvModal","show","watch","stringify","computed","get","set","component"],"mappings":"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","file":"js/chunk-2d21d8af.9b133225.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"id\":\"export-popup\",\"size\":\"lg\"}},[_c('editor',{ref:\"editor\",attrs:{\"height\":\"300px\",\"content\":_vm.content,\"options\":{\n      enableBasicAutocompletion: true,\n      enableSnippets: true,\n      enableLiveAutocompletion: true,\n      tabSize:2\n    },\"fontSize\":14,\"lang\":'python',\"theme\":'eclipse'}},[_c('div',[_c('b-button-toolbar',{attrs:{\"aria-label\":\"Toolbar with button groups and dropdown menu\"}},[_c('b-dropdown',{staticClass:\"mx-1\",scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.format)+\" \")]},proxy:true}])},[_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.onFormatChange('json')}}},[_vm._v(\"json\")]),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.onFormatChange('ttl')}}},[_vm._v(\"ttl\")]),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.onFormatChange('jsonld')}}},[_vm._v(\"jsonld\")])],1),_c('b-button-group',{staticClass:\"mx-1\"},[_c('b-button',{on:{\"click\":_vm.downloadFile}},[_vm._v(\"Download\")]),_c('b-button',{on:{\"click\":_vm.save}},[_vm._v(\"Save\")]),_c('b-button',{on:{\"click\":_vm.IpfsAdd}},[_vm._v(\"Save a copy on Ipfs\")])],1)],1)],1)]),_c('StorageModal'),_c('IpfsModal',{attrs:{\"cid\":_vm.cid}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as jsonld from 'jsonld';\r\nimport ldp from '@/util/ldp.json' // https://gist.github.com/nandana/661d5961b91b78ff50b6\r\n//console.log(jsonldcontext)\r\nimport visContext from '@/util/visContext.json'\r\n\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\n\r\nimport Websocket from '@/util/Websocket.js'\r\n// dcm: \"https://www.dublincore.org/specifications/dublin-core/dcmi-terms/\",\r\n// ldp: \"http://www.w3.org/ns/ldp#\",\r\n// json: \"http://www.w3.org/ns/iana/media-types/application/json#\",\r\n\r\n// const context = {\r\n//   \"name\": \"http://schema.org/name\",\r\n//   \"homepage\": {\"@id\": \"http://schema.org/url\", \"@type\": \"@id\"},\r\n//   \"image\": {\"@id\": \"http://schema.org/image\", \"@type\": \"@id\"}\r\n// };\r\n//const context =;\r\n// ALIAS IN JSLONLD https://github.com/schemaorg/schemaorg/issues/854\r\n// \"owl\":\"http://www.w3.org/2002/07/owl#\",\r\n//\"as\":\"https://www.w3.org/ns/activitystreams\",\r\n// \"schema\":\"http://schema.org/\",\r\n// \"life\": \"http://purl.org/vocab/lifecycle/schema#\",\r\n\r\n\r\nexport default {\r\n  methods: {\r\n    //     equalsIgnoreOrder(a, b) {\r\n    // if (a.length !== b.length) return false;\r\n    // const uniqueValues = new Set([...a, ...b]);\r\n    // for (const v of uniqueValues) {\r\n    //   const aCount = a.filter(e => e === v).length;\r\n    //   const bCount = b.filter(e => e === v).length;\r\n    //   if (aCount !== bCount) return false;\r\n    // }\r\n    // return true;\r\n    // },\r\n\r\n    arraysEqual(a1, a2) {\r\n      return a1 != undefined && a2 != undefined && a1.length === a2.length && a1.every((o, idx) => this.objectsEqual(o, a2[idx]));\r\n    },\r\n\r\n    objectsEqual(o1, o2){\r\n      return typeof o1 === 'object' && Object.keys(o1).length > 0\r\n      ? Object.keys(o1).length === Object.keys(o2).length\r\n      && Object.keys(o1).every(p => this.objectsEqual(o1[p], o2[p]))\r\n      : o1 === o2;\r\n    },\r\n    async loadFRAMED(url){\r\n      let file = await fc.readFile(url, {\r\n        headers: {\r\n          'Accept': 'application/ld+json',\r\n          'Content-Type': 'application/ld+json'\r\n        },\r\n        // method: \"POST\",\r\n        // body: JSON.stringify({a: 1, b: 2})\r\n      })\r\n      //  console.log(\"FILE\",this.file)\r\n      let jsonFile = JSON.parse(file)\r\n      console.log(\"jsonFile\",jsonFile)\r\n      if(Array.isArray(jsonFile) && jsonFile.length == 1 && jsonFile[0]['@id'] != undefined ){\r\n        this.parsePossibleJsonld(url, jsonFile[0])\r\n      }else if(Array.isArray(jsonFile) && jsonFile.length > 1){\r\n        this.parseFolder(url)\r\n      }else{\r\n        //  console.log(\"todo\", jsonFile)\r\n        this.parsePossibleJsonld(url, jsonFile)\r\n      }\r\n      //solid folder : jsonFile is array\r\n\r\n    },\r\n\r\n\r\n    async parseFolder(url){\r\n      let folder = await fc.readFolder(url)\r\n      console.log(\"FOLDER\", folder)\r\n    },\r\n\r\n    async parsePossibleJsonld(url, jsonFile){\r\n      console.log(\"possible jsonld\",url, jsonFile)\r\n\r\n\r\n\r\n      // let doc = {\r\n      //   \"@context\": {\r\n      //     \"@vocab\": \"http://example.org/\",\r\n      //     \"contains\": {\"@type\": \"@id\"}\r\n      //   },\r\n      //   \"@graph\": [{\r\n      //     \"@id\": \"http://example.org/library\",\r\n      //     \"@type\": \"Library\",\r\n      //     \"location\": \"Athens\",\r\n      //     \"contains\": \"http://example.org/library/the-republic\"\r\n      //   }, {\r\n      //     \"@id\": \"http://example.org/library/the-republic\",\r\n      //     \"@type\": \"Book\",\r\n      //     \"creator\": \"Plato\",\r\n      //     \"title\": \"The Republic\",\r\n      //     \"contains\": \"http://example.org/library/the-republic#introduction\"\r\n      //   }, {\r\n      //     \"@id\": \"http://example.org/library/the-republic#introduction\",\r\n      //     \"@type\": \"Chapter\",\r\n      //     \"description\": \"An introductory chapter on The Republic.\",\r\n      //     \"title\": \"The Introduction\"\r\n      //   }]\r\n      // }\r\n\r\n\r\n      //compact or frame ???? https://w3c.github.io/json-ld-framing/#framing\r\n      let frame = {\r\n        \"@context\": {\"@vocab\": \"http://example.org/\"},\r\n        \"@type\": \"Library\",\r\n        \"contains\": {\r\n          \"@type\": \"Book\",\r\n          \"contains\": {\r\n            \"@type\": \"Chapter\"\r\n          }\r\n        },\r\n        \"ldp:contains\": {\r\n          \"@type\": \"Book\",\r\n          \"ldp:contains\": {\r\n            \"@type\": \"Chapter\"\r\n          }\r\n        },\r\n        nodes: [],\r\n        edges: []\r\n      }\r\n\r\n      //  const framed = await jsonld.frame(doc, frame);\r\n      const framed = await jsonld.frame(jsonFile, frame);\r\n      console.log(\"FRAMED\", framed)\r\n\r\n      let compacted = {}\r\n      if (jsonFile['@context'] != undefined ){\r\n        let cont = await jsonFile['@context']\r\n        compacted =  await jsonld.compact(url, cont);\r\n      }else{\r\n        compacted = await jsonld.compact(url, ldp['@context']);\r\n      }\r\n      console.log(\"compacted loaded\", compacted)\r\n    },\r\n\r\n\r\n    async load(url){\r\n      console.log(\"LOAD\",url, !this.sockets.includes(url))\r\n      if (!this.sockets.includes(url)){\r\n        this.sockets.push(url)\r\n        let websocket = new Websocket(url, this.load)\r\n        console.log(websocket)\r\n        console.log(\"SOCKETS\",this.sockets)\r\n      }\r\n      console.log(\"LOAD 2\",url, !this.sockets.includes(url))\r\n\r\n\r\n      // let file = await fc.readFile(url, {\r\n      //   headers: {\r\n      //     'Accept': 'application/ld+json',\r\n      //     'Content-Type': 'application/ld+json'\r\n      //   },\r\n      //   // method: \"POST\",\r\n      //   // body: JSON.stringify({a: 1, b: 2})\r\n      // })\r\n      // //  console.log(\"FILE\",this.file)\r\n      // let jsonFile = JSON.parse(file)\r\n      // console.log(\"jsonFile\",jsonFile)\r\n      //\r\n      //\r\n      //\r\n      // let folder = await fc.readFolder(url)\r\n      // console.log(\"FOLDER\", folder)\r\n\r\n\r\n\r\n\r\n      // FIRST TRY TO LOAD JSONLD\r\n      let documentLoaderType = 'xhr'\r\n      await jsonld.useDocumentLoader(documentLoaderType/*, options*/);\r\n      //  const iri = url;\r\n      let doc = {}\r\n      try{\r\n        doc = await jsonld.documentLoader(url, function(err) {\r\n          if(err) {\r\n            console.log(err)\r\n          }\r\n        })\r\n      }catch(e){\r\n        alert(e)\r\n      }\r\n      //      console.log(doc)\r\n      let json = JSON.parse(doc.document)\r\n      console.log(\"JSON\",json)\r\n      this.json =json\r\n\r\n\r\n\r\n      if(json.nodes != undefined && Array.isArray(json.nodes) && json.edges != undefined && Array.isArray(json.edges)){\r\n        let identiques = this.arraysEqual(this.json.nodes, this.network.nodes) && this.arraysEqual(this.json.edges, this.network.edges)\r\n        console.log(\"identiques\",identiques)\r\n        if (identiques != true && this.url != undefined){ //false or undefined\r\n          this.network.nodes = json.nodes\r\n          this.network.edges = json.edges\r\n        }\r\n        return json\r\n      }else{\r\n        // try jsonld\r\n\r\n        let compacted = {}\r\n        if (json['@context'] != undefined ){\r\n          let cont = await json['@context']\r\n          compacted = await jsonld.compact(url, cont);\r\n        }else{\r\n          compacted = await jsonld.compact(url, visContext);\r\n        }\r\n\r\n\r\n        console.log(\"compacted loaded\", compacted)\r\n\r\n        if (compacted.type == 'vis'){\r\n          let identiques = this.arraysEqual(this.json.nodes, this.network.nodes) && this.arraysEqual(this.json.edges, this.network.edges)\r\n          console.log(\"identiques\",identiques)\r\n          if (identiques == false && this.url != undefined){\r\n            this.network.nodes = []\r\n            this.network.edges = []\r\n            Array.isArray(compacted.nodes) ? this.network.nodes =  compacted.nodes : this.network.nodes.push(compacted.nodes)\r\n            Array.isArray(compacted.edges) ? this.network.edges =  compacted.edges : this.network.edges.push(compacted.edges)\r\n          }\r\n        }else if(\r\n          compacted[\"@context\"] ==\"https://data.virtual-assembly.org/context.json\"\r\n        ){\r\n          compacted[\"@context\"] = [compacted[\"@context\"]]\r\n          compacted[\"@base\"] = url\r\n          console.log(compacted)\r\n          this.network = this.pairToVis(compacted)\r\n        }\r\n        console.log(this.network)\r\n        return compacted\r\n      }\r\n    },\r\n\r\n    pairToVis(compacted){\r\n      let nodes = [], edges = []\r\n      console.log(\"base\",compacted[\"@base\"] )\r\n      console.log(compacted[\"ldp:contains\"])\r\n      let items = compacted[\"ldp:contains\"].map(obj=> ({ ...obj, label: obj.id }))\r\n\r\n      Array.isArray(items) ? nodes = items : console.info(\"i cant deal with\", items)\r\n      return {nodes: nodes, edges: edges}\r\n    },\r\n\r\n\r\n\r\n    nodeFromLabel(label) {\r\n      return {id: \"#\"+label.trim().split(' ').join('_'),\r\n      label: label,\r\n      color: {  background: '#D2E5FF', border: '#2B7CE9'},\r\n      shape: 'ellipse'}\r\n    },\r\n    edgeFromLabel(data){\r\n      return { from: data.from, to: data.to, label: data.label}\r\n    },\r\n\r\n\r\n    async jsonToJsonLd(json){\r\n      //  let compacted = await jsonld.compact(json, context);\r\n      let ld = {}\r\n      Object.assign(ld, json)\r\n      ld['@context'] = visContext\r\n      ld.type = 'vis'\r\n      return ld\r\n    },\r\n\r\n    async jsonToJsonLd1(json){\r\n      let compacted = await jsonld.compact(json, visContext);\r\n      compacted['@id'] = ''\r\n      compacted['@graph'] = []\r\n      json.nodes.forEach(async function(n) {\r\n        let n_clone = {}\r\n        Object.assign(n_clone, n)\r\n        n_clone['@type'] = 'ipgs:Node'\r\n        compacted['@graph'].push(n_clone)\r\n      });\r\n\r\n      json.edges.forEach(async function(e) {\r\n        let e_clone = {}\r\n        Object.assign(e_clone, e)\r\n        e_clone['@type'] = 'ipgs:Edge',\r\n        e_clone['from'] = {'@id': e.from}\r\n        e_clone['to'] = {'@id': e.to}\r\n        // delete e_clone.from\r\n        // delete e_clone.to\r\n        compacted['@graph'].push(e_clone)\r\n      });\r\n\r\n      return compacted\r\n    },\r\n\r\n\r\n    jsonToTtl(json) {\r\n      var output = \"@prefix : <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n      output += \"@prefix owl: <http://www.w3.org/2002/07/owl#> . \\n\";\r\n      output += \"@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . \\n\";\r\n      output += \"@prefix xml: <http://www.w3.org/XML/1998/namespace> . \\n\";\r\n      output += \"@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . \\n\";\r\n      output += \"@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . \\n\";\r\n      output += \"@prefix smag: <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n      output += \"@base <http://smag0.blogspot.fr/spoggy> . \\n\";\r\n      //output += \"<http://smag0.blogspot.fr/spoggy> rdf:type owl:Ontology ;  \\n\";\r\n      //output += \"                    owl:versionIRI <http://smag0.blogspot.fr/spoggy/1.0.0> . \\n\";\r\n      output += \" \\n\";\r\n      //output += \"owl:Class rdfs:subClassOf owl:Thing .  \\n\";\r\n\r\n      var listeInfos = new Array();\r\n      var listeComplementaire = new Array();\r\n\r\n      for (var i = 0; i < json.edges.length; i++) {\r\n        var edge = json.edges[i];\r\n        var sujet = edge.from;\r\n        var propriete = edge.label.replace(/\\s/g, \"_\");\r\n        var objet = edge.to;\r\n\r\n        //  console.log(objet);\r\n        let nodeSubj = json.nodes.find(x => x.id==sujet);\r\n        let nodeObj = json.nodes.find(x => x.id==objet);\r\n        // AJOUTER EVENTUELLEMENT LA RECUPERATION DE SHAPE, COLOR, pour l'export RDF\r\n        var sujetLabel = nodeSubj.label.replace(/\\n/g, \"\");\r\n        try{\r\n          var objetLabel = nodeObj.label.replace(/\\n/g, \"\");\r\n        }catch(error)\r\n        {\r\n          //  console.error(\"ERREUR NON TRAITEE\")\r\n          //  console.error(error)\r\n\r\n        }\r\n        var sujetWithPrefix = this.validRdf(sujet);\r\n        var proprieteWithPrefix = this.validRdf(propriete);\r\n        var objetWithPrefix = this.validRdf(objet);\r\n\r\n        if (sujetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n          sujetWithPrefix = '_:' + sujetWithPrefix; // blanknode\r\n        }\r\n\r\n        if (proprieteWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n          proprieteWithPrefix = ':' + proprieteWithPrefix; // propriete utilisant \"@base <http://smag0.blogspot.fr/spoggy>\"\r\n        }\r\n\r\n        if (objetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n          objetWithPrefix = '_:' + objetWithPrefix;  // blanknode\r\n        }\r\n\r\n        var typedeProp = [\"owl:AnnotationProperty\", \"owl:ObjectProperty\", \"owl:DatatypeProperty\"];\r\n        var indiceTypeDeProp = 1; // -1 pour ne pas ajouter la prop, sinon par defaut en annotationProperty, 1 pour Object, 2 pour Datatype --> revoir pour les datatypes\r\n\r\n        if (\r\n          (proprieteWithPrefix == \"type\") ||\r\n          (proprieteWithPrefix == \":type\") ||\r\n          (proprieteWithPrefix == \"rdf:type\") ||\r\n          (proprieteWithPrefix == \":a\") ||\r\n          (proprieteWithPrefix == \":est_un\") ||\r\n          (proprieteWithPrefix == \":est_une\") ||\r\n          (proprieteWithPrefix == \":is_a\")\r\n        ) {\r\n          proprieteWithPrefix = \"rdf:type\";\r\n          listeComplementaire.push(objetWithPrefix + \" rdf:type owl:Class . \\n\");\r\n          indiceTypeDeProp = 1;\r\n        } else if ((proprieteWithPrefix == \"subClassOf\") || (proprieteWithPrefix == \":subClassOf\") || (proprieteWithPrefix == \"rdfs:subClassOf\")) {\r\n          proprieteWithPrefix = \"rdfs:subClassOf\";\r\n        }\r\n        else if ((proprieteWithPrefix == \"sameAs\") || (proprieteWithPrefix == \":sameAs\")) {\r\n          proprieteWithPrefix = \"owl:sameAs\";\r\n          indiceTypeDeProp = -1;\r\n        }\r\n        else if (\r\n          (proprieteWithPrefix.toLowerCase() == \"ispartof\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"partof\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \":partof\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \":ispartof\")) {\r\n            proprieteWithPrefix = \"smag:partOf\";\r\n            indiceTypeDeProp = 1;\r\n          } else if (\r\n            (proprieteWithPrefix.toLowerCase() == \"comment\") ||\r\n            (proprieteWithPrefix.toLowerCase() == \"commentaire\") ||\r\n            (proprieteWithPrefix.toLowerCase() == \"//\") ||\r\n            (proprieteWithPrefix.toLowerCase() == \"#\")\r\n          ) {\r\n            proprieteWithPrefix = \"rdfs:comment\";\r\n            indiceTypeDeProp = -1;\r\n          }\r\n          if (indiceTypeDeProp >= 0) {\r\n            listeComplementaire.push(proprieteWithPrefix + \" rdf:type \" + typedeProp[indiceTypeDeProp] + \" . \\n\");\r\n          }\r\n          var data = sujetWithPrefix + \" \" + proprieteWithPrefix + \" \" + objetWithPrefix + \" . \\n\";\r\n          data += sujetWithPrefix + \" \" + \"rdfs:label \\\"\" + sujetLabel + \"\\\" . \\n\";\r\n          data += objetWithPrefix + \" \" + \"rdfs:label \\\"\" + objetLabel + \"\\\" . \\n\";\r\n          listeInfos[i] = data;\r\n          //  console.log(data);\r\n        }\r\n        //suppression des doublons\r\n        listeInfos = this.uniq_fast(listeInfos.sort());\r\n        listeComplementaire = this.uniq_fast(listeComplementaire.sort());\r\n        // console.log (listeInfos);\r\n        for (var k = 0; k < listeInfos.length; k++) {\r\n          output = output + listeInfos[k];\r\n        }\r\n        for (var l = 0; l < listeComplementaire.length; l++) {\r\n          output = output + listeComplementaire[l];\r\n        }\r\n        return output\r\n      },\r\n      uniq_fast(a) {\r\n        var seen = {};\r\n        var out = [];\r\n        var len = a.length;\r\n        var j = 0;\r\n        for(var i = 0; i < len; i++) {\r\n          var item = a[i];\r\n          if(seen[item] !== 1) {\r\n            seen[item] = 1;\r\n            out[j++] = item;\r\n          }\r\n        }\r\n        return out;\r\n      },\r\n\r\n      validRdf(string){\r\n        // A REVOIR\r\n        //  console.log(string)\r\n        //  console.log(network.body.data.nodes.get(string));\r\n        //  console.log(\"nettoyage \"+ string);\r\n        // transformer le noeud en noeud rdf (resource ou literal)\r\n        // ajouter la construction du noeud, son uri, prefix, localname, type...\r\n        var valid = {};\r\n        valid.type = \"uri\";\r\n        if (string.indexOf(\" \") !== -1){\r\n          valid.type = \"literal\";\r\n        }else{\r\n          /*\r\n          replaceAll(string, \" \",\"_\");\r\n          replaceAll(string, \"\",\"_\");\r\n          replaceAll(string, \",\",\"_\");\r\n          replaceAll(string, \";\",\"_\");\r\n          replaceAll(string, \" \",\"_\");*/\r\n        }\r\n\r\n        return string;\r\n      },\r\n\r\n\r\n\r\n      downloadFile(){\r\n        var contenu = this.content\r\n        var format = this.format;\r\n        //  console.log(contenu, format)\r\n        var contentType = \"\";\r\n        var fileNameToSaveAs = \"\"\r\n        var filename = prompt(\"Choose a name for the exported file :\", \"Spoggy\");\r\n        if (filename == null || filename == \"\") {\r\n          return;\r\n        }\r\n\r\n        switch (format) {\r\n          case 'json':\r\n          contentType = 'application/json';\r\n          fileNameToSaveAs = filename + \".json\"; //Date.now() +\r\n          break;\r\n          case 'ttl':\r\n          contentType = 'text/turtle';\r\n          fileNameToSaveAs = filename + \".ttl\"; //Date.now() +\r\n          break;\r\n          case 'jsonld':\r\n          contentType = 'application/ld+json';\r\n          fileNameToSaveAs = filename + \".jsonld\"; //Date.now() +\r\n          break;\r\n          default:\r\n          alert('Format de fichier non reconnu', format);\r\n        }\r\n        var textFileAsBlob = new Blob([contenu], { type: contentType }\r\n        );\r\n        var downloadLink = document.createElement(\"a\");\r\n        downloadLink.download = fileNameToSaveAs;\r\n        downloadLink.innerHTML = \"Download File\";\r\n        if(navigator.userAgent.indexOf(\"Chrome\") != -1) {\r\n          downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n        } else {\r\n          downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n          downloadLink.target=\"_blank\";\r\n          downloadLink.style.display = \"none\";\r\n          document.body.appendChild(downloadLink);\r\n        }\r\n        var event = document.createEvent(\"MouseEvents\");\r\n        event.initMouseEvent(\r\n          \"click\", true, false, window, 0, 0, 0, 0, 0\r\n          , false, false, false, false, 0, null\r\n        );\r\n        downloadLink.dispatchEvent(event);\r\n        setTimeout(function(){\r\n          document.body.removeChild(downloadLink);\r\n          window.URL.revokeObjectURL(downloadLink);\r\n        }, 1000);\r\n      },\r\n    },\r\n\r\n  }\r\n","<template>\r\n  <b-modal id=\"export-popup\" size=\"lg\">\r\n    <editor\r\n    height=\"300px\"\r\n    ref=\"editor\"\r\n    :content=\"content\"\r\n    :options=\"{\r\n      enableBasicAutocompletion: true,\r\n      enableSnippets: true,\r\n      enableLiveAutocompletion: true,\r\n      tabSize:2\r\n    }\"\r\n    :fontSize='14'\r\n    :lang=\"'python'\"\r\n    :theme=\"'eclipse'\"\r\n    >\r\n    <!--    @onChange=\"editorChange\"\r\n    @init=\"editorInit\"\r\n  -->\r\n  <div>\r\n    <b-button-toolbar aria-label=\"Toolbar with button groups and dropdown menu\">\r\n      <!-- <b-button-group class=\"mx-1\">\r\n      <b-button>New</b-button>\r\n      <b-button>Edit</b-button>\r\n      <b-button>Undo</b-button>\r\n    </b-button-group> -->\r\n    <b-dropdown class=\"mx-1\" >\r\n      <template #button-content>\r\n        {{format}}\r\n      </template>\r\n      <b-dropdown-item @click=\"onFormatChange('json')\">json</b-dropdown-item>\r\n      <b-dropdown-item @click=\"onFormatChange('ttl')\">ttl</b-dropdown-item>\r\n      <b-dropdown-item @click=\"onFormatChange('jsonld')\">jsonld</b-dropdown-item>\r\n      <!-- <b-dropdown-item @click=\"onFormatChange('ipfs')\">ipfs</b-dropdown-item> -->\r\n    </b-dropdown>\r\n    <b-button-group class=\"mx-1\">\r\n      <b-button @click=\"downloadFile\">Download</b-button>\r\n      <b-button @click=\"save\">Save</b-button>\r\n      <b-button @click=\"IpfsAdd\">Save a copy on Ipfs</b-button>\r\n    </b-button-group>\r\n  </b-button-toolbar>\r\n</div>\r\n</editor>\r\n<StorageModal />\r\n<IpfsModal :cid=\"cid\" />\r\n</b-modal>\r\n</template>\r\n\r\n<script>\r\nimport networkUtilMixin from '@/mixins1/networkUtilMixin'\r\nimport ace from 'brace'\r\nimport 'brace/ext/language_tools';\r\nimport 'brace/mode/python.js'\r\nimport 'brace/snippets/python.js';\r\nimport 'brace/theme/eclipse.js';\r\n// ace/mode/turtle\r\n\r\n\r\nexport default {\r\n  name: 'ExportModal',\r\n  mixins: [networkUtilMixin],\r\n  components: {\r\n    'Editor': () => import('vue2x-ace-editor'),\r\n    'StorageModal': () => import('@/components/solid/StorageModal'),\r\n    'IpfsModal': () => import('@/components/storage/IpfsModal'),\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      content: \"content\",\r\n      format: 'json',\r\n      cid: \"\"\r\n    }\r\n  },\r\n  created(){\r\n    this.editorContent = this.$store.state.ipgs.editorContent\r\n  },\r\n  mounted() {\r\n    this.getIpfsNodeInfo();\r\n  },\r\n  methods: {\r\n    fakeFunctionToNOTBELINTED(){\r\n      console.log(ace)\r\n    },\r\n    async getIpfsNodeInfo() {\r\n      try {\r\n        // Await for ipfs node instance.\r\n        this.ipfs = await this.$ipfs;\r\n        // Call ipfs `id` method.\r\n        // Returns the identity of the Peer.\r\n        const { agentVersion, id } = await this.ipfs.id();\r\n        this.agentVersion = agentVersion;\r\n        this.id = id;\r\n        // Set successful status text.\r\n        this.status = \"Connected to IPFS =)\";\r\n      } catch (err) {\r\n        // Set error status text.\r\n        this.status = `Error: ${err}`;\r\n      }\r\n    },\r\n    async onFormatChange(f){\r\n      this.format = f\r\n      console.log(\"FORMAT CHANGED\",f)\r\n      switch (this.format) {\r\n        case 'json':\r\n        this.content = JSON.stringify(this.editorContent.content, undefined, 2)\r\n        break;\r\n        case 'ttl':\r\n        this.content = await this.jsonToTtl(this.editorContent.content)\r\n        break;\r\n        case 'jsonld':\r\n        this.content = JSON.stringify(await this.jsonToJsonLd(this.editorContent.content), undefined, 2)\r\n        break;\r\n        // case 'ipfs':\r\n        // this.IpfsAdd()\r\n        // break;\r\n        default:\r\n        console.warn('UNKNOWN FORMAT', f)\r\n\r\n      }\r\n\r\n    },\r\n    async IpfsAdd(){\r\n      console.log(this.ipfs)\r\n      console.log(this.editorContent.content)\r\n      const results = await this.ipfs.add(JSON.stringify(this.editorContent.content))\r\n      console.log(\"res\", results)\r\n      console.log(await results.cid)\r\n      this.cid = results.cid\r\n      this.$bvModal.show(\"ipfs-modal\")\r\n      // this.editorContent.content.ipfscid = results.cid\r\n      // this.cid = results.cid\r\n    },\r\n\r\n    save() {\r\n      console.log('save')\r\n      this.$store.commit('ipgs/setDataToSave', {content: this.content, format: this.format})\r\n\r\n\r\n      this.$bvModal.show(\"storage-modal\")\r\n      //  this.$bvModal.hide(\"export-popup\")\r\n    },\r\n  },\r\n  watch:{\r\n    editorContent(){\r\n      console.log(this.editorContent)\r\n      this.content = JSON.stringify(this.editorContent.content, undefined, 2)\r\n      this.format = this.editorContent.format\r\n    },\r\n  },\r\n  computed:{\r\n    editorContent: {\r\n      get () { return this.$store.state.ipgs.editorContent},\r\n      set (/*value*/) { /*this.updateTodo(value)*/ }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportModal.vue?vue&type=template&id=23bda907&\"\nimport script from \"./ExportModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}